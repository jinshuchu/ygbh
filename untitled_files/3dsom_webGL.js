(function() {"undefined"==typeof EGG&&(EGG={});
(function(b){b.Um=function(a){return a.slice(0)};b.ac=function(a,b,c){return[a,b,c]};b.mi=function(a,b,c,e){return[a,b,c,e]};b.gn=function(a,b){return a[b-1]};b.fn=function(a,b){return a[b-1]};b.mn=function(a,b){return a[b]};b.ln=function(a,b){return a[b]};b.Xm=function(a,b){return[a[0]+b[0],a[1]+b[1],a[2]+b[2],a[3]+b[3]]};b.Lf=function(a,b){return[a[0]+b[0],a[1]+b[1],a[2]+b[2]]};b.Nk=function(a,b){return[a[0]-b[0],a[1]-b[1],a[2]-b[2],a[3]-b[3]]};b.ae=function(a,b){return[a[0]-b[0],a[1]-b[1],a[2]-
b[2]]};b.Ja=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]};b.Ni=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]};b.Zj=function(a,b){return[a[0]*b,a[1]*b,a[2]*b,a[3]*b]};b.Xb=function(a,b){return[a[0]*b,a[1]*b,a[2]*b]};b.wd=function(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]};b.la=function(a){var b=a[0]*a[0]+a[1]*a[1]+a[2]*a[2],c=1;0<b&&(c=Math.pow(b,.5));return[a[0]/c,a[1]/c,a[2]/c]};b.rh=function(a){var b=a[0]*a[0]+a[1]*a[1]+a[2]*a[2]+a[3]*a[3],c=1;
0<b&&(c=Math.pow(b,.5));return[a[0]/c,a[1]/c,a[2]/c,a[3]/c]};b.Bg=function(a){return Math.pow(a[0]*a[0]+a[1]*a[1]+a[2]*a[2],.5)};b.Mi=function(a,h){return b.Bg(b.ae(a,h))};b.jj=function(a){return Math.pow(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]+a[3]*a[3],.5)};b.dn=function(a,h){return b.jj(b.Nk(a,h))};b.Zm=function(a,h){a=b.la(a);h=b.la(h);d=b.Ja(a,h);-1>d&&(d=-1);1<d&&(d=1);return Math.acos(d)};b.$m=function(a,h){a=b.rh(a);h=b.rh(h);d=b.Ni(a,h);-1>d&&(d=-1);1<d&&(d=1);return Math.acos(d)};EGG_math_use_webgl_float=
!1;b.Pm=EGG_math_use_webgl_float?function(a){if(9==a.length)return new Float32Array(a);if(16==a.length)return new Float32Array([a[0],a[1],a[2],a[4],a[5],a[6],a[8],a[9],a[10]]);throw"invalid matrix length";}:function(a){if(9==a.length)a=a.slice(0);else if(16==a.length)a=[a[0],a[1],a[2],a[4],a[5],a[6],a[8],a[9],a[10]];else throw"invalid matrix length";a.get=function(a){return this[a]};return a};b.ia=EGG_math_use_webgl_float?function(a){return new Float32Array(a)}:function(a){a=a.slice(0);a.get=function(a){return this[a]};
return a};b.md=function(a){if(9==a.length)a=[a[0],a[1],a[2],0,a[3],a[4],a[5],0,a[6],a[7],a[8],0,0,0,0,1];else if(16==a.length)a=a.slice(0);else throw"invalid matrix length";a.get=function(a){return this[a]};return a};b.cn=function(a){return a[12]*a[9]*a[6]*a[3]-a[8]*a[13]*a[6]*a[3]-a[12]*a[5]*a[10]*a[3]+a[4]*a[13]*a[10]*a[3]+a[8]*a[5]*a[14]*a[3]-a[4]*a[9]*a[14]*a[3]-a[12]*a[9]*a[2]*a[7]+a[8]*a[13]*a[2]*a[7]+a[12]*a[1]*a[10]*a[7]-a[0]*a[13]*a[10]*a[7]-a[8]*a[1]*a[14]*a[7]+a[0]*a[9]*a[14]*a[7]+a[12]*
a[5]*a[2]*a[11]-a[4]*a[13]*a[2]*a[11]-a[12]*a[1]*a[6]*a[11]+a[0]*a[13]*a[6]*a[11]+a[4]*a[1]*a[14]*a[11]-a[0]*a[5]*a[14]*a[11]-a[8]*a[5]*a[2]*a[15]+a[4]*a[9]*a[2]*a[15]+a[8]*a[1]*a[6]*a[15]-a[0]*a[9]*a[6]*a[15]-a[4]*a[1]*a[10]*a[15]+a[0]*a[5]*a[10]*a[15]};b.va=function(a){var b=a[0],c=a[1],e=a[2],g=a[3],k=a[4],f=a[5],l=a[6],n=a[7],m=a[8],r=a[9],p=a[10],q=a[11],u=a[12],v=a[13],t=a[14];a=a[15];var w=u*r*l*g-m*v*l*g-u*f*p*g+k*v*p*g+m*f*t*g-k*r*t*g-u*r*e*n+m*v*e*n+u*c*p*n-b*v*p*n-m*c*t*n+b*r*t*n+u*f*e*
q-k*v*e*q-u*c*l*q+b*v*l*q+k*c*t*q-b*f*t*q-m*f*e*a+k*r*e*a+m*c*l*a-b*r*l*a-k*c*p*a+b*f*p*a;return[(r*t*n-v*p*n+v*l*q-f*t*q-r*l*a+f*p*a)/w,(v*p*g-r*t*g-v*e*q+c*t*q+r*e*a-c*p*a)/w,(f*t*g-v*l*g+v*e*n-c*t*n-f*e*a+c*l*a)/w,(r*l*g-f*p*g-r*e*n+c*p*n+f*e*q-c*l*q)/w,(u*p*n-m*t*n-u*l*q+k*t*q+m*l*a-k*p*a)/w,(m*t*g-u*p*g+u*e*q-b*t*q-m*e*a+b*p*a)/w,(u*l*g-k*t*g-u*e*n+b*t*n+k*e*a-b*l*a)/w,(k*p*g-m*l*g+m*e*n-b*p*n-k*e*q+b*l*q)/w,(m*v*n-u*r*n+u*f*q-k*v*q-m*f*a+k*r*a)/w,(u*r*g-m*v*g-u*c*q+b*v*q+m*c*a-b*r*a)/w,(k*v*
g-u*f*g+u*c*n-b*v*n-k*c*a+b*f*a)/w,(m*f*g-k*r*g-m*c*n+b*r*n+k*c*q-b*f*q)/w,(u*r*l-m*v*l-u*f*p+k*v*p+m*f*t-k*r*t)/w,(m*v*e-u*r*e+u*c*p-b*v*p-m*c*t+b*r*t)/w,(u*f*e-k*v*e-u*c*l+b*v*l+k*c*t-b*f*t)/w,(k*r*e-m*f*e+m*c*l-b*r*l-k*c*p+b*f*p)/w]};b.Nd=function(a,h){return b.ac(a[0]*h[0]+a[1]*h[1]+a[2]*h[2]+a[3],a[4]*h[0]+a[5]*h[1]+a[6]*h[2]+a[7],a[8]*h[0]+a[9]*h[1]+a[10]*h[2]+a[11])};b.qa=function(a,h){return b.mi(a[0]*h[0]+a[1]*h[1]+a[2]*h[2]+a[3]*h[3],a[4]*h[0]+a[5]*h[1]+a[6]*h[2]+a[7]*h[3],a[8]*h[0]+a[9]*
h[1]+a[10]*h[2]+a[11]*h[3],a[12]*h[0]+a[13]*h[1]+a[14]*h[2]+a[15]*h[3])};b.An=function(a,h){return b.ia([a[0]*h,a[1]*h,a[2]*h,a[3]*h,a[4]*h,a[5]*h,a[6]*h,a[7]*h,a[8]*h,a[9]*h,a[10]*h,a[11]*h,a[12]*h,a[13]*h,a[14]*h,a[15]*h])};b.zn=function(a,b){a.set(0,a[0]*b);a.set(1,a[1]*b);a.set(2,a[2]*b);a.set(3,a[3]*b);a.set(4,a[4]*b);a.set(5,a[5]*b);a.set(6,a[6]*b);a.set(7,a[7]*b);a.set(8,a[8]*b);a.set(9,a[9]*b);a.set(10,a[10]*b);a.set(11,a[11]*b);a.set(12,a[12]*b);a.set(13,a[13]*b);a.set(14,a[14]*b);a.set(15,
a[15]*b);return a};b.Vm=function(a,b){a.set(0,a[0]+b[0]);a.set(1,a[1]+b[1]);a.set(2,a[2]+b[2]);a.set(3,a[3]+b[3]);a.set(4,a[4]+b[4]);a.set(5,a[5]+b[5]);a.set(6,a[6]+b[6]);a.set(7,a[7]+b[7]);a.set(8,a[8]+b[8]);a.set(9,a[9]+b[9]);a.set(10,a[10]+b[10]);a.set(11,a[11]+b[11]);a.set(12,a[12]+b[12]);a.set(13,a[13]+b[13]);a.set(14,a[14]+b[14]);a.set(15,a[15]+b[15]);return a};b.Wm=function(a,h){return b.ia([a[0]+h[0],a[1]+h[1],a[2]+h[2],a[3]+h[3],a[4]+h[4],a[5]+h[5],a[6]+h[6],a[7]+h[7],a[8]+h[8],a[9]+h[9],
a[10]+h[10],a[11]+h[11],a[12]+h[12],a[13]+h[13],a[14]+h[14],a[15]+h[15]])};b.Hn=function(a,b){a.set(0,a[0]-b[0]);a.set(1,a[1]-b[1]);a.set(2,a[2]-b[2]);a.set(3,a[3]-b[3]);a.set(4,a[4]-b[4]);a.set(5,a[5]-b[5]);a.set(6,a[6]-b[6]);a.set(7,a[7]-b[7]);a.set(8,a[8]-b[8]);a.set(9,a[9]-b[9]);a.set(10,a[10]-b[10]);a.set(11,a[11]-b[11]);a.set(12,a[12]-b[12]);a.set(13,a[13]-b[13]);a.set(14,a[14]-b[14]);a.set(15,a[15]-b[15]);return a};b.In=function(a,h){return b.ia([a[0]-h[0],a[1]-h[1],a[2]-h[2],a[3]-h[3],a[4]-
h[4],a[5]-h[5],a[6]-h[6],a[7]-h[7],a[8]-h[8],a[9]-h[9],a[10]-h[10],a[11]-h[11],a[12]-h[12],a[13]-h[13],a[14]-h[14],a[15]-h[15]])};b.v=function(a,b){var c=b[0],e=b[1],g=b[2],k=b[3],f=b[4],l=b[5],n=b[6],m=b[7],r=b[8],p=b[9],q=b[10],u=b[11],v=b[12],t=b[13],w=b[14],A=b[15],B=a[0],x=a[1],L=a[2],H=a[3],D=a[4],I=a[5],J=a[6],K=a[7],y=a[8],z=a[9],P=a[10],M=a[11],E=a[12],Q=a[13],F=a[14],G=a[15];return[B*c+x*f+L*r+H*v,B*e+x*l+L*p+H*t,B*g+x*n+L*q+H*w,B*k+x*m+L*u+H*A,D*c+I*f+J*r+K*v,D*e+I*l+J*p+K*t,D*g+I*n+J*
q+K*w,D*k+I*m+J*u+K*A,y*c+z*f+P*r+M*v,y*e+z*l+P*p+M*t,y*g+z*n+P*q+M*w,y*k+z*m+P*u+M*A,E*c+Q*f+F*r+G*v,E*e+Q*l+F*p+G*t,E*g+Q*n+F*q+G*w,E*k+Q*m+F*u+G*A]};b.Kn=function(a){var b=a[1];a.set(1,a[4]);a.set(4,b);b=a[8];a.set(8,a[2]);a.set(2,b);b=a[3];a.set(3,a[12]);a.set(12,b);b=a[9];a.set(9,a[6]);a.set(6,b);b=a[13];a.set(13,a[7]);a.set(7,b);b=a[14];a.set(14,a[11]);a.set(11,b)};b.Ga=function(a){return b.md([a[0],a[4],a[8],a[12],a[1],a[5],a[9],a[13],a[2],a[6],a[10],a[14],a[3],a[7],a[11],a[15]])};b.Da=function(a,
b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15]};b.Cn=function(a,b,c,e){a[4*(b-1)+(c-1)]=e;void 0!==a.Ke&&delete a.Ke};b.En=function(a,b,c,e){a[4*b+c]=e;void 0!==a.Ke&&delete a.Ke};b.en=function(a,b,c){return a.get(4*(b-1)+(c-1))};b.hn=function(a,b,c){return a[4*b+c]};b.nn=function(a){a.dj=new Float32Array(a);return a.dj};b.yg=function(){b.ia([1,0,0,0,0,1,0,0,0,0,1,0,0,0,
0,1])};b.jb=function(a){var h,c,e;3==arguments.length?(h=arguments[0],c=arguments[1],e=arguments[2]):a.data?(h=a.data[0],c=a.data[1],e=a.data[2]):a instanceof Array&&(h=a[0],c=a[1],e=a[2]);return b.ia([1,0,0,h,0,1,0,c,0,0,1,e,0,0,0,1])};b.fb=function(a){var h,c,e;3==arguments.length?(h=arguments[0],c=arguments[1],e=arguments[2]):a.data?(h=a.data[0],c=a.data[1],e=a.data[2]):a instanceof Array&&(h=a[0],c=a[1],e=a[2]);return b.ia([h,0,0,0,0,c,0,0,0,0,e,0,0,0,0,1])};b.qe=1;b.gi=2;b.hi=3;b.ii=4;b.ji=5;
b.ki=6;b.Uc=function(a,h){var c,e,g;2<arguments.length?(c=arguments[0],e=arguments[1],g=arguments[2],h=arguments[3]):a.data?(c=a.data[0],e=a.data[1],g=a.data[2]):a instanceof Array&&(c=a[0],e=a[1],g=a[2]);h||(h=b.qe);var k=Math.cos(c),f=Math.sin(c);c=Math.cos(e);var l=Math.sin(e);e=Math.cos(g);g=Math.sin(g);k=b.ia([1,0,0,0,0,k,-f,0,0,f,k,0,0,0,0,1]);c=b.ia([c,0,l,0,0,1,0,0,-l,0,c,0,0,0,0,1]);e=b.ia([e,-g,0,0,g,e,0,0,0,0,1,0,0,0,0,1]);switch(h){case b.qe:return b.v(k,b.v(c,e));case b.gi:return b.v(k,
b.v(e,c));case b.hi:return b.v(c,b.v(k,e));case b.ii:return b.v(c,b.v(e,k));case b.ji:return b.v(e,b.v(k,c));case b.ki:return b.v(e,b.v(c,k))}};b.Ym=function(a,h){var c,e,g,k,f,l;h=[h[0],h[1],h[2],0];var n=h[0],m=h[1],r=h[2],p=Math.cos(a),q=1-p;c=Math.sin(a);k=n*c;f=m*c;l=r*c;c=n*m;e=m*r;g=r*n;return b.ia([q*n*n+p,q*c-l,q*g+f,0,q*c+l,q*m*m+p,q*e-k,0,q*g-f,q*e+k,q*r*r+p,0,0,0,0,1])};b.Oj=function(a,h,c,e){return b.ia([1-2*h*h-2*c*c,2*a*h-2*c*e,2*a*c+2*h*e,0,2*a*h+2*c*e,1-2*a*a-2*c*c,2*h*c-2*a*e,0,
2*a*c-2*h*e,2*h*c+2*a*e,1-2*a*a-2*h*h,0,0,0,0,1])};b.Gg=function(a,h,c,e,g,k){return b.ia([2/(h-a),0,0,-(h+a)/(h-a),0,2/(e-c),0,-(e+c)/(e-c),0,0,-2/(k-g),-(k+g)/(k-g),0,0,0,1])};b.lj=function(a,h,c,e,g,k){return b.ia([2*g/(h-a),0,(h+a)/(h-a),0,0,2*g/(e-c),(e+c)/(e-c),0,0,0,-(k+g)/(k-g),-2*k*g/(k-g),0,0,-1,0])};b.Hg=function(a,h,c,e){a=c*Math.tan(.00872664625972*a);var g=-a;return b.lj(g*h,a*h,g,a,c,e)};b.qn=function(a){var b=a[0],c=a[1],e=a[2],g=a[4],k=a[5],f=a[6],l=a[8],n=a[9];a=a[10];return[Math.sqrt(b*
b+c*c+e*e),Math.sqrt(g*g+k*k+f*f),Math.sqrt(l*l+n*n+a*a)]};b.yn=function(a){var b=a[0]+a[5]+a[10]+1,c,e,g;0<b?(c=.5/Math.sqrt(b),g=.25/c,b=(a[9]-a[6])*c,e=(a[2]-a[8])*c,a=(a[4]-a[1])*c):a[0]>a[5]&&a[0]>a[10]?(c=2*Math.sqrt(1+a[0]-a[5]-a[10]),g=(a[9]-a[6])/c,b=.25/c,e=(a[1]+a[4])/c,a=(a[2]+a[8])/c):a[5]>a[10]?(c=2*Math.sqrt(1+a[5]-a[0]-a[10]),g=(a[2]-a[8])/c,b=(a[1]+a[4])/c,e=.25/c,a=(a[6]+a[9])/c):(c=2*Math.sqrt(1+a[10]-a[0]-a[5]),g=(a[4]-a[1])/c,b=(a[2]+a[8])/c,e=(a[6]+a[9])/c,a=.25/c);c=Math.sqrt(b*
b+e*e+a*a+g*g);return[b/c,e/c,a/c,g/c]};b.wn=function(a,h){var c=b.la(h);return[c[0],c[1],c[2],b.Ja(a,c)]};b.vn=function(a,h,c){var e=[c[0],c[1],c[2]],g=b.Ja(e,h);if(0>=g)return!1;c=-(b.Ja(e,a)+c[3])/g;return 0>=c?!1:b.Lf(a,b.Xb(h,c))};b.Bn=function(a,h,c,e,g){xcoord=-(2*a/c-1)/g[0];ycoord=(2*h/e-1)/g[5];zcoord=1;return b.la([xcoord,ycoord,zcoord])};b.Ua=function(a,b,c,e,g,k){this.a=[a,b,c,e,g,k];this.ve()};b.Ua.prototype.Ag=function(){return 0==this.a[0]&&0==this.a[1]&&0==this.a[2]&&0==this.a[3]&&
0==this.a[4]&&0==this.a[5]};b.Ua.prototype.If=function(a){this.Ag()?(this.a[0]=a.a[0],this.a[1]=a.a[1],this.a[2]=a.a[2],this.a[3]=a.a[3],this.a[4]=a.a[4],this.a[5]=a.a[5]):a.Ag()||(this.a[0]=Math.min(a.a[0],this.a[0]),this.a[2]=Math.min(a.a[2],this.a[2]),this.a[4]=Math.min(a.a[4],this.a[4]),this.a[1]=Math.max(a.a[1],this.a[1]),this.a[3]=Math.max(a.a[3],this.a[3]),this.a[5]=Math.max(a.a[5],this.a[5]));this.ve()};b.Ua.prototype.sd=function(a){var h=b.qa(a,[this.a[0],this.a[2],this.a[4],1]),c=b.qa(a,
[this.a[1],this.a[2],this.a[4],1]),e=b.qa(a,[this.a[0],this.a[3],this.a[4],1]),g=b.qa(a,[this.a[1],this.a[3],this.a[4],1]),k=b.qa(a,[this.a[0],this.a[2],this.a[5],1]),f=b.qa(a,[this.a[1],this.a[2],this.a[5],1]),l=b.qa(a,[this.a[0],this.a[3],this.a[5],1]);a=b.qa(a,[this.a[1],this.a[3],this.a[5],1]);this.a[0]=Math.min(h[0],c[0],e[0],g[0],k[0],f[0],l[0],a[0]);this.a[1]=Math.max(h[0],c[0],e[0],g[0],k[0],f[0],l[0],a[0]);this.a[2]=Math.min(h[1],c[1],e[1],g[1],k[1],f[1],l[1],a[1]);this.a[3]=Math.max(h[1],
c[1],e[1],g[1],k[1],f[1],l[1],a[1]);this.a[4]=Math.min(h[2],c[2],e[2],g[2],k[2],f[2],l[2],a[2]);this.a[5]=Math.max(h[2],c[2],e[2],g[2],k[2],f[2],l[2],a[2]);this.ve()};b.Ua.prototype.ve=function(){var a=this.a[0],b=this.a[1],c=this.a[2],e=this.a[3],g=this.a[4],k=this.a[5];this.Ij=[[a,c,g],[b,c,g],[a,e,g],[b,e,g],[a,c,k],[b,c,k],[a,e,k],[b,e,k]];this.yb=[(this.a[1]-this.a[0])/2+this.a[0],(this.a[3]-this.a[2])/2+this.a[2],(this.a[5]-this.a[4])/2+this.a[4]];a=this.a[0]-this.yb[0];b=this.a[2]-this.yb[1];
c=this.a[4]-this.yb[2];this.Zg=Math.sqrt(a*a+b*b+c*c)};b.Ua.prototype.clone=function(){return new b.Ua(this.a[0],this.a[1],this.a[2],this.a[3],this.a[4],this.a[5])};b.Ua.prototype.toString=function(){return this.a.toString()};b.xi=function(a){var h=b.va(a),c=b.qa,e=b.ae,g=b.wd,k=b.la;a=b.Ja;var f=c(h,[-1,-1,-1,1]),l=c(h,[1,-1,-1,1]),n=c(h,[-1,-1,1,1]),m=c(h,[1,1,-1,1]),r=c(h,[1,1,1,1]),p=c(h,[-1,1,1,1]),f=[f[0]/f[3],f[1]/f[3],f[2]/f[3]],l=[l[0]/l[3],l[1]/l[3],l[2]/l[3]],n=[n[0]/n[3],n[1]/n[3],n[2]/
n[3]],m=[m[0]/m[3],m[1]/m[3],m[2]/m[3]],r=[r[0]/r[3],r[1]/r[3],r[2]/r[3]],p=[p[0]/p[3],p[1]/p[3],p[2]/p[3]],h=k(g(e(m,l),e(f,l))),c=k(g(e(p,n),e(r,n))),q=k(g(e(f,n),e(p,n))),u=k(g(e(r,m),e(m,l))),m=k(g(e(p,m),e(m,r))),e=k(g(e(f,l),e(n,f)));h.push(a(h,f));c.push(a(c,n));q.push(a(q,f));u.push(a(u,l));m.push(a(m,r));e.push(a(e,f));return[h,c,q,u,m,e]};b.Lk=function(a,b){var c=a[0],e=a[1],g=a[2],k=a[3],f=b[0],l=b[1],n=b[2],m=b[3],r=b[4],p=b[5];return 0<c*f[0]+e*f[1]+g*f[2]-f[3]-k||0<c*l[0]+e*l[1]+g*l[2]-
l[3]-k||0<c*n[0]+e*n[1]+g*n[2]-n[3]-k||0<c*m[0]+e*m[1]+g*m[2]-m[3]-k||0<c*r[0]+e*r[1]+g*r[2]-r[3]-k||0<c*p[0]+e*p[1]+g*p[2]-p[3]-k?!1:!0};b.Jj=function(a,b){for(var c=b[0],e=b[1],g=b[2],k=b[3],f=b[4],l=b[5],n,m,r,p=0;p<a.length;p++)if(n=a[p][0],m=a[p][1],r=a[p][2],0<n*c[0]+m*c[1]+r*c[2]-c[3]&&0<n*e[0]+m*e[1]+r*e[2]-e[3]&&0<n*g[0]+m*g[1]+r*g[2]-k[3]&&0<n*k[0]+m*k[1]+r*k[2]-f[3]&&0<n*f[0]+m*f[1]+r*f[2]-f[3]&&0<n*l[0]+m*l[1]+r*l[2]-l[3])return!1;return!0}})(EGG);"undefined"==typeof EGG&&(EGG={});
(function(b){b.l=function(a,b){for(proto in a.prototype)b.prototype[proto]=a.prototype[proto]};b.pn=function(){for(var a in b)window[a]=b[a]};b.Qm=function(a){return""!=b[a].prototype.J?new b[a]:!1};b.Tm=1;b.Yk=0;b.sf=1;b.rf=2;b.wh=3;b.xh=4;b.yh=5;b.kb=0;b.zc=1;b.yc=2;b.pe=3;b.Df=4;b.li=1;b.Ef=1;b.xc=1;b.Bf=2;b.fi=3;b.NONE=0;b.ni=1;b.oi=2;b.pi=3;b.ci=1;b.$h=2;b.di=3;b.ai=4;b.ei=5;b.bi=6;b.Mm=function(a){return a};b.Rm=function(a){return a*a};b.Sm=function(a){a=a*(2-a);return a*a};b.error=function(a){console&&
console.log&&console.log("EGG error: "+a)};b.s={};b.s.re={};b.Cf=!1;b.s.Ei=function(){var a="0123456789ABCDEF".split(""),b=["8","9","A","B"];uuid="";for(var e=0;38>e;e++)switch(e){case 8:uuid=uuid+"-";break;case 13:uuid=uuid+"-";break;case 18:uuid=uuid+"-";break;case 14:uuid=uuid+"4";break;case 19:uuid+=b[Math.round(3*Math.random())];break;default:uuid+=a[Math.round(15*Math.random())]}return uuid};b.s.Y=function(a,c){b.Cf&&(c||0===c||(c=b.s.Ei()),a.uid=c,b.s.re[c]=a)};b.s.Rk=function(a){delete b.s.re[a]};
b.s.get=function(a){return(a=b.s.re[a])?a:!1};b.Pi=function(a){var b=0,e=0,g=0,k=0,f=0,l=0,n=0,m=0,r=0,p=0,q=0,u=0,v=0,t=a.length;for(a+="000000";v<t;)n=a.charCodeAt(v++),m=a.charCodeAt(v++),r=a.charCodeAt(v++),p=a.charCodeAt(v++),q=a.charCodeAt(v++),u=a.charCodeAt(v++),b=(f+n+m)%255,e=(l+m+r)%255,g=(b+r+p)%255,k=(e+p+q)%255,f=(g+q+u)%255,l=(k+u+n)%255;return[String.fromCharCode(b),String.fromCharCode(e),String.fromCharCode(g),String.fromCharCode(k),String.fromCharCode(f),String.fromCharCode(l)].join("")};
b.Rb=function(a,c,e){var g=b.Pi(e);a.Yd||(a.Yd={});if(!a.Yd[g]){c=a.createShader(c);a.shaderSource(c,e);a.compileShader(c);if(!a.getShaderParameter(c,a.COMPILE_STATUS))try{b.error(a.getShaderInfoLog(c));return}catch(k){}a.Yd[g]=c}return a.Yd[g]};var a=0;b.Kc=function(h,c,e){h.Yg||(h.Yg=[]);for(var g=h.Yg,k=0;k<g.length;k++)if(g[k].Oi==e&&g[k].Tk==c)return g[k].U;var f=h.createProgram();f.Xg=a++;h.attachShader(f,c);h.attachShader(f,e);h.linkProgram(f);g.push({Tk:c,Oi:e,U:f});if(!f.sh)for(f.sh={},c=
h.getProgramParameter(f,h.ACTIVE_UNIFORMS),k=0;k<c;++k)e=h.getActiveUniform(f,k),f.sh[e.name]={on:b.getUniformLocation(h,f,e.name),info:e};return f};b.getUniformLocation=function(a,b,e){b.jf||(b.jf={});b.kf||(b.kf={});b.kf[e]||(b.jf[e]=a.getUniformLocation(b,e),b.kf[e]=!0);return b.jf[e]};b.M=function(a,b,e,g){"string"==typeof g&&(g=+g);if(null!=e)a["uniform"+b](e,g)};b.rb=function(a,b,e,g,k){"string"==typeof e&&(e=+e);"string"==typeof g&&(g=+g);"string"==typeof k&&(k=+k);null!=b&&a.uniform3f(b,e,
g,k)};b.Fn=function(a,b,e,g,k,f,l){if(null!=e)a["uniform"+b](e,g,k,f,l)};b.hb=function(a,b,e,g){null!=b&&a.uniformMatrix4fv(b,e,g)};b.getAttribLocation=function(a,b,e){b.td||(b.td={});void 0==b.td[e]&&(b.td[e]=a.getAttribLocation(b,e));return b.td[e]};b.lb=function(a){var b,e,g,k,f={bn:"000000",Ln:"ffffff"};f[a]&&(a="#"+f[a]);a.substr&&"#"==a.substr(0,1)?(a=a.substr(1),8==a.length?(b=parseInt("0x"+a.substr(0,2))/255,e=parseInt("0x"+a.substr(2,2))/255,g=parseInt("0x"+a.substr(4,2))/255,k=parseInt("0x"+
a.substr(6,2))/255):4==a.length?(b=parseInt("0x"+a.substr(0,1))/15,e=parseInt("0x"+a.substr(1,1))/15,g=parseInt("0x"+a.substr(2,1))/15,k=parseInt("0x"+a.substr(3,1))/15):6==a.length?(b=parseInt("0x"+a.substr(0,2))/255,e=parseInt("0x"+a.substr(2,2))/255,g=parseInt("0x"+a.substr(4,2))/255,k=1):3==a.length&&(b=parseInt("0x"+a.substr(0,1))/15,e=parseInt("0x"+a.substr(1,1))/15,g=parseInt("0x"+a.substr(2,1))/15,k=1)):a.substr&&"rgb("==a.substr(0,4)?(a=a.substr(4).split(","),b=parseInt(a[0])/255,e=parseInt(a[1])/
255,g=parseInt(a[2])/255,k=1):a.substr&&"rgba("==a.substr(0,5)?(a=a.substr(4).split(","),b=parseInt(a[0])/255,e=parseInt(a[1])/255,g=parseInt(a[2])/255,k=parseInt(a[3])/255):k=g=e=b=0;return{r:b,o:e,m:g,bc:k}}})(EGG);
(function(b){b.Eb=function(){};b.Eb.prototype.fireEvent=function(a,b){if(this.mb&&this.mb[a])for(var c=this.mb[a],e=0;e<c.length;e++)c[e].call(this,b)};b.Eb.prototype.addEventListener=function(a,b){this.mb||(this.mb={});this.mb[a]||(this.mb[a]=[]);this.mb[a].push(b)};b.Eb.prototype.removeEventListener=function(a,b){var c=this.mb[a].indexOf(b);-1!=c&&this.mb[a].splice(c,1)}})(EGG);(function(b){b.Z=function(){}})(EGG);
(function(b){b.Document=function(){this.Kd=[];this.Pb=[]};b.Document.prototype.Kd=null;b.Document.prototype.Pb=null;b.Document.prototype.bh=null;b.Document.prototype.Pe=0;b.Document.prototype.version=0;b.Document.prototype.getElementById=function(a){for(var b=this.getElementsByTagName("*"),c=0;c<b.length;c++)if(b[c].getAttribute("id")==a)return b[c];return null};b.Document.prototype.La=function(a,b){if("http://"==a.substr(0,7)||"file://"==a.substr(0,7)||"https://"==a.substr(0,8))return a;b||(b=window.location.href);
for(var c=b.split("/"),e=c[2],g=c[0],k=[],f=3;f<c.length-1;f++)k.push(c[f]);"/"==a.substr(0,1)&&(k=[]);c=a.split("/");for(f=0;f<c.length;f++)".."==c[f]?k.pop():""!=c[f]&&k.push(c[f]);return g+"//"+e+"/"+k.join("/")};b.Document.prototype.kj=function(a,h){this.Pe++;a=this.La(a,h);var c=new XMLHttpRequest;c&&(c.Xf=a,c.Wf=this,c.overrideMimeType("text/xml"),c.onreadystatechange=function(){4==this.readyState&&(200==this.status||0==this.status?(this.responseXML.getElementById=this.Wf.getElementById,this.Wf.loaded(this.Xf,
this.responseXML)):b.error("Error loading Document: "+this.Xf+" status "+this.status))},c.open("GET",a,!0),c.send(""))};b.Document.prototype.loaded=function(a,b){this.Pe--;this.Pb[a]={xml:b};var c=b.getElementsByTagName("glge");c[0]&&c[0].hasAttribute("version")&&(this.version=parseFloat(c[0].getAttribute("version")));for(var c=b.getElementsByTagName("import"),e=0;e<c.length;e++)this.Pb[this.La(c[e].getAttribute("url"),a)]||(this.Pb[this.La(c[e].getAttribute("url"),a)]={},this.kj(c[e].getAttribute("url"),
a));0==this.Pe&&this.Qi()};b.Document.prototype.Qi=function(){for(var a=0;a<this.Kd.length;a++)this.Kd[a](this.Kd.bh);this.onLoad()};b.Document.prototype.onLoad=function(){};b.Document.prototype.Nb=function(a){if(!a)return!1;a=a.split("_");for(var b="",c=0;c<a.length;c++)b=b+a[c][0].toUpperCase()+a[c].substr(1);return b};b.Document.prototype.$e=function(a){for(var h,c,e=0;e<a.attributes.length;e++){c=!1;h="set"+this.Nb(a.attributes[e].nodeName);"#"==a.attributes[e].value[0]&&(c=this.Ae(a.attributes[e].value.substr(1),
!0));c||(c="undefined"!=typeof b[a.attributes[e].value]?b[a.attributes[e].value]:a.attributes[e].value);if(a.object[h])a.object[h](c);"uid"==a.attributes[e].nodeName&&(b.s.Rk(a.object.uid),a.object.uid=a.attributes[e].value,b.s.Y(a.object,a.attributes[e].value))}};b.Document.prototype.od=function(a){for(var b,c=a.firstChild;c;){b="add"+this.Nb(c.tagName);if(a.object[b])a.object[b](this.Ae(c));c=c.nextSibling}};b.Document.prototype.Ae=function(a,h){var c,e;if("string"==typeof a)for(e in this.Pb)if(this.Pb[e].xml&&
(c=this.Pb[e].xml.getElementById(a))){a=c;break}return"string"==typeof a?(h||b.error("Element "+a+" not found in document"),!1):this["get"+this.Nb(a.tagName)]?this["get"+this.Nb(a.tagName)](a):this.jg(a)};b.Document.prototype.jg=function(a){a.object||(b[this.Nb(a.tagName)]?(a.object=new (b[this.Nb(a.tagName)]),this.$e(a),this.od(a)):b.error("XML Parse Error: EGG Object not found"));return a.object};b.Document.prototype.Gd=function(a){if(!a.object){var h=this.La(this.bh,null);a.object=new (b[this.Nb(a.tagName)]);
a.object.Db(this.La(a.getAttribute("src"),h));a.removeAttribute("src");this.$e(a)}return a.object};b.Document.prototype.qb=function(a){a=a.firstChild;for(var b="",c=[],e,g;a;)for(e=(b+a.nodeValue).split(","),a=a.nextSibling,""==e[0]&&e.unshift(),a&&(b=e.pop()),g=0;g<e.length;g++)c.push(e[g]);return c};b.Document.prototype.Na=function(a){if(0<this.version)return this.jg(a);if(!a.object){a.object=new b.u;this.$e(a);for(var h=a.firstChild;h;){switch(h.tagName){case "positions":a.object.lh(this.qb(h));
break;case "normals":a.object.Ze(this.qb(h));break;case "uv1":a.object.oh(this.qb(h));break;case "uv2":a.object.zk(this.qb(h));break;case "faces":a.object.ih(this.qb(h));break;case "joint_names":for(var c=this.qb(h),e=[],g=0;g<c.length;g++)"#"==c[g].substr(0,1)?e.push(this.Ae(c[g].substr(1))):e.push(c[g]);a.object.lk(e);break;case "bind_matrix":c=this.qb(h);e=[];for(g=0;g<c.length;g++)e.push(b.md(c[g].split(" ")));a.object.kk(e);break;case "joints":a.object.Ck(this.qb(h),h.getAttribute("count"));
break;case "weights":a.object.Dk(this.qb(h),h.getAttribute("count"))}h=h.nextSibling}}return a.object}})(EGG);
(function(b){b.f=function(){};b.f.prototype.Qa=0;b.f.prototype.Ra=0;b.f.prototype.Sa=0;b.f.prototype.Sf=0;b.f.prototype.Tf=0;b.f.prototype.Uf=0;b.f.prototype.Qj=0;b.f.prototype.Rj=0;b.f.prototype.Sj=0;b.f.prototype.Pj=0;b.f.prototype.Sc=0;b.f.prototype.Vb=0;b.f.prototype.Tc=0;b.f.prototype.xd=0;b.f.prototype.yd=0;b.f.prototype.zd=0;b.f.prototype.oc=1;b.f.prototype.pc=1;b.f.prototype.qc=1;b.f.prototype.Dc=0;b.f.prototype.Ec=0;b.f.prototype.Fc=0;b.f.prototype.O=null;b.f.prototype.Yj=b.qe;b.f.prototype.nb=
null;b.f.prototype.mode=b.xc;b.f.prototype.kh=function(){this.nb=[0,0,0]};b.f.prototype.gd=function(a){var h,c=this.ec();a.ec?h=a.ec():h={x:a[0],y:a[1],z:a[2]};a=b.la([c.x-h.x,c.y-h.y,c.z-h.z]);h=b.la(b.wd([0,0,1],a));c=b.la(b.wd(a,h));this.rk(b.md([h[0],c[0],a[0],0,h[1],c[1],a[1],0,h[2],c[2],a[2],0,0,0,0,1]))};b.f.prototype.Ee=function(){if(!this.Wb){var a=this.Fd();this.mode==b.xc&&(this.Wb=b.Uc(a.x,a.y,a.z,this.Yj));this.mode==b.Bf&&(this.Wb=b.Oj(a.x,a.y,a.z,a.Wk))}return this.Wb};b.f.prototype.rk=
function(a){this.mode=b.fi;this.Wb=a;this.za()};b.f.prototype.mk=function(a){this.Qa=a;this.tb=this.jb=null;this.za()};b.f.prototype.nk=function(a){this.Ra=a;this.tb=this.jb=null;this.za()};b.f.prototype.pk=function(a){this.Sa=a;this.tb=this.jb=null;this.za()};b.f.prototype.rc=function(a,b,c){this.Qa=a;this.Ra=b;this.Sa=c;this.tb=this.jb=null;this.za()};b.f.prototype.mh=function(a){this.mode=b.xc;this.Vb=a;this.Wb=this.tb=null;this.za();return this};b.f.prototype.af=function(a,h,c){this.mode=b.xc;
this.Sc=a;this.Vb=h;this.Tc=c;this.Wb=this.tb=null;this.za()};b.f.prototype.sk=function(a,b,c){b||(c=b=a);this.oc=a;this.pc=b;this.qc=c;this.fb=this.tb=null;this.za()};b.f.prototype.Fe=function(){return this.Sc};b.f.prototype.Ed=function(){return this.Vb};b.f.prototype.Ge=function(){return this.Tc};b.f.prototype.dg=function(){return this.xd};b.f.prototype.eg=function(){return this.yd};b.f.prototype.fg=function(){return this.zd};b.f.prototype.Ie=function(){return this.oc};b.f.prototype.qg=function(){return this.pc};
b.f.prototype.rg=function(){return this.qc};b.f.prototype.gg=function(){return this.Dc};b.f.prototype.hg=function(){return this.Ec};b.f.prototype.ig=function(){return this.Fc};b.f.prototype.ec=function(){var a={};a.x=parseFloat(this.Qa)+parseFloat(this.Sf);a.y=parseFloat(this.Ra)+parseFloat(this.Tf);a.z=parseFloat(this.Sa)+parseFloat(this.Uf);return a};b.f.prototype.Fd=function(){var a={};this.mode==b.xc&&(a.x=parseFloat(this.Sc)+parseFloat(this.xd),a.y=parseFloat(this.Vb)+parseFloat(this.yd),a.z=
parseFloat(this.Tc)+parseFloat(this.zd));this.mode==b.Bf&&(a.x=parseFloat(this.Qj),a.y=parseFloat(this.Rj),a.z=parseFloat(this.Sj),a.Wk=parseFloat(this.Pj));return a};b.f.prototype.He=function(){var a={};a.x=parseFloat(this.oc)+parseFloat(this.Dc);a.y=parseFloat(this.pc)+parseFloat(this.Ec);a.z=parseFloat(this.qc)+parseFloat(this.Fc);return a};b.f.prototype.aj=function(){this.fb||(this.fb=b.fb(parseFloat(this.oc)+parseFloat(this.Dc),parseFloat(this.pc)+parseFloat(this.Ec),parseFloat(this.qc)+parseFloat(this.Fc)));
return this.fb};b.f.prototype.bj=function(){this.jb||(this.jb=b.jb(parseFloat(this.Qa)+parseFloat(this.Sf),parseFloat(this.Ra)+parseFloat(this.Tf),parseFloat(this.Sa)+parseFloat(this.Uf)));return this.jb};b.f.prototype.lg=function(){this.ga();return this.Eg};b.f.prototype.za=function(){this.O=null;if(this.w)for(var a=0;a<this.w.length;a++)this.w[a].za()};b.f.prototype.ga=function(){if(!this.O){if(this.tb){var a=this.tb;this.Eg=this.tb}else{var a=this.bj(),h=this.aj();this.Eg=a=b.v(a,b.v(this.Ee(),
h))}this.parent&&(a=b.v(this.parent.ga(),a));this.O=a}return this.O}})(EGG);(function(b){b.da=function(){}})(EGG);
(function(b){b.Mh=1;b.$k=2;b.ba=function(a){b.s.Y(this,a);this.w=[]};b.l(b.f,b.ba);b.l(b.Z,b.ba);b.l(b.da,b.ba);b.ba.prototype.w=null;b.ba.prototype.J="pg4";b.ba.prototype.type=b.Mh;b.ba.prototype.Ce=function(a){a||(a={});var b=this.getName();""!=b&&(a[b]=this);for(b=0;b<this.w.length;b++)this.w[b].Ce&&this.w[b].Ce(a);return a};b.ba.prototype.ua=function(a){this.fa=null;for(var h=0;h<this.w.length;h++)this.w[h].ua&&(this.fa?this.fa.If(this.w[h].ua(!0)):this.fa=this.w[h].ua(!0).clone());this.fa||(this.fa=
new b.Ua(0,0,0,0,0,0));a?this.fa.sd(this.lg()):this.fa.sd(this.ga());return this.fa};b.ba.prototype.Lc=function(a){this.nb&&this.gd(this.nb);this.Ib&&this.rd();a||(a=[]);for(var b=0;b<this.w.length;b++)"to3"==this.w[b].J||"tt1"==this.w[b].J||this.w[b].Jn?this.w[b].xn?a.unshift(this.w[b]):a.push(this.w[b]):this.w[b].Lc&&this.w[b].Lc(a);return a};b.ba.prototype.gc=function(a){a||(a=[]);for(var b=0;b<this.w.length;b++)"tl5"==this.w[b].J?a.push(this.w[b]):this.w[b].gc&&this.w[b].gc(a);return a};b.ba.prototype.nd=
function(a){a.parent&&a.parent.removeChild(a);a.O=null;a.parent=this;this.w.push(a);if(a.gc&&0<a.gc().length||"tl5"==a.J){for(;a.parent;)a=a.parent;a=a.Lc();for(var b=0;b<a.length;b++)a[b].ad&&a[b].ad()}return this};b.ba.prototype.Jf=b.ba.prototype.nd;b.ba.prototype.removeChild=function(a){for(var b=0;b<this.w.length;b++)if(this.w[b]==a){this.w.splice(b,1);if(this.D&&this.D["remove"+a.J])this.D["remove"+a.J](a);break}};b.ba.prototype.Aa=function(a){this.c=a;for(var b=0;b<this.w.length;b++)this.w[b].Aa&&
this.w[b].Aa(a)};b.ba.prototype.Vd=function(a){for(var b=0;b<this.w.length;b++)this.w[b].Vd&&this.w[b].Vd(a);this.We=a;return this}})(EGG);
(function(b){b.ea={};b.ea.Sg=function(a){switch(a.Rf){case "create":var h=new b[a.type](a.uid);this.fh(h,a.attributes);a.w&&b.ea.od(h,a.w);return h;case "update":return h=b.s.get(a.uid),this.fh(h,a.attributes),a.add&&b.ea.od(h,a.add),a.remove&&b.ea.Vj(h,a.remove),h}return null};b.ea.fh=function(a,h){if(h)for(var c in h)a["set"+c]&&(h[c].Rf&&(h[c]=b.ea.Sg(h[c])),a["set"+c](h[c]))};b.ea.od=function(a,h){h instanceof Array||(h=[h]);for(var c=0;c<h.length;c++){var e=h[c].Rf?b.ea.Sg(h[c]):b.s.get(h[c]);
a["add"+e.J](e)}};b.ea.Vj=function(a,h){h instanceof Array||(h=[h]);for(var c=0;c<h.length;c++){var e=b.s.get(h[c]);a["add"+e.J](e)}};b.ea.be=[];b.ea.rn=function(a,h,c){b.ea.be.push([a,h,c]);1==b.ea.be.length&&b.ea.Dg()};b.ea.Dg=function(){var a=b.ea.be.pop(),h=new XMLHttpRequest;h.onreadystatechange=function(){if(4==this.readyState)if(200==this.status||0==this.status)a[1](this.responseText);else b.error("Error loading Document: "+a[0]+" status "+this.status)};h.open("GET",a[0],!0);h.send("");0<b.ea.be.length&&
b.ea.Dg()}})(EGG);(function(b){b.cd=function(a){b.s.Y(this,a);this.zi=[]};b.l(b.Z,b.cd);b.l(b.da,b.cd);b.l(b.Eb,b.cd);b.cd.prototype.start=function(a,b,c){b||(b=!1);a||(a=0);a=this.zi;this.Nf=!1;for(var e=0;e<a.length;e++){var g=a[e].Ib,k=this,f=a[e].target;"string"==typeof f&&c&&c[f]&&(f=c[f]);var l;l=function(){f.removeEventListener("animFinished",l);k.Nf||f.Ib!=g||(k.fireEvent("animFinished",{}),k.Nf=!0)};f.addEventListener("animFinished",l);f.bk(g);f.Dn(b)}}})(EGG);
(function(b){b.ge=function(a){b.s.Y(this,a)};b.l(b.Z,b.ge);b.l(b.da,b.ge);b.ge.prototype.bk=function(a){this.Ib=a}})(EGG);
(function(b){b.u=function(a,h){b.s.Y(this,a);this.wb=[];this.G=[];this.oa=[];this.ta={};void 0!==h?this.mf=h:this.mf=b.u.xb};b.u.Hf=2;b.u.xb=1;b.u.Gf=0;b.l(b.Z,b.u);b.l(b.da,b.u);b.l(b.Eb,b.u);b.u.prototype.c=null;b.u.prototype.J="hm2";b.u.prototype.wb=null;b.u.prototype.G=null;b.u.prototype.L=null;b.u.prototype.ta=null;b.u.prototype.oa=null;b.u.prototype.$=null;b.u.prototype.Oc=null;b.u.prototype.loaded=!1;b.u.prototype.nf=!1;b.u.prototype.ua=function(){if(!this.fa){for(var a,h,c,e,g,k,f=0;f<this.G.length;f++)if("position"==
this.G[f].name)var l=this.G[f].data;for(f=0;f<l.length;f+=3)0==f?(a=h=l[f],c=e=l[f+1],g=k=l[f+2]):(a=Math.min(a,l[f]),h=Math.max(h,l[f]),c=Math.min(c,l[f+1]),e=Math.max(e,l[f+1]),g=Math.min(g,l[f+2]),k=Math.max(k,l[f+2]));this.fa=new b.Ua(a,h,c,e,g,k)}return this.fa};b.u.prototype.lk=function(a){this.$=a;this.fireEvent("sux87",{})};b.u.prototype.kk=function(a){this.Oc=a;this.fireEvent("sux87",{})};b.u.prototype.Ck=function(a,b){b||(b=3*a.length/this.cb.length);if(5>b)this.gb("joints1",a,b);else{for(var c=
[],e=[],g=0;g<a.length;g++)4>g%b?c.push(a[g]):e.push(a[g]);this.gb("joints1",c,4);this.gb("joints2",e,b-4)}this.fireEvent("sux87",{})};b.u.prototype.Dk=function(a,b){b||(b=3*a.length/this.cb.length);for(var c=0;c<a.length;c+=parseInt(b)){for(var e=0,g=0;g<b;g++)e+=parseFloat(a[c+g]);for(g=0;g<b;g++)a[c+g]/=e}if(4>b)this.gb("weights1",a,b);else{e=[];g=[];for(c=0;c<a.length;c++)4>c%b?e.push(a[c]):g.push(a[c]);this.gb("weights1",e,4);this.gb("weights2",g,b-4)}this.fireEvent("sux87",{})};b.u.prototype.oh=
function(a){for(var b=0,c=0;c<a.length;c+=2)this.oa[b]=a[c],this.oa[b+1]=a[c+1],this.oa[b+2]||(this.oa[b+2]=a[c]),this.oa[b+3]||(this.oa[b+3]=a[c+1]),b+=4;this.gb("UV",this.oa,4)};b.u.prototype.zk=function(a){for(var b=0,c=0;c<a.length;c+=2)this.oa[b]||(this.oa[b]=a[c]),this.oa[b+1]||(this.oa[b+1]=a[c+1]),this.oa[b+2]=a[c],this.oa[b+3]=a[c+1],b+=4;this.gb("UV",this.oa,4)};b.u.prototype.lh=function(a){this.loaded=!0;this.cb=a;this.gb("position",a,3)};b.u.prototype.Ze=function(a){this.pb=a;this.gb("normal",
a,3)};b.u.prototype.gb=function(a,b,c){for(var e,g=0;g<this.G.length;g++)this.G[g].name==a&&(e=g);e?this.G[e]={name:a,data:b,size:c,ub:!1}:this.G.push({name:a,data:b,size:c,ub:!1})};b.u.prototype.Kh=function(a){var b=this.cb,c=this.ta.data;if(!c)for(var c=[],e=0;e<b.length/3;e++)c[e]=e;b=[];for(e=0;e<c.length;e+=3)b.push(c[e],c[e+1]),b.push(c[e+1],c[e+2]),b.push(c[e+2],c[e]);this.L||(this.L=a.createBuffer());a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.L);a.bufferData(a.ELEMENT_ARRAY_BUFFER,new Uint16Array(b),
a.STATIC_DRAW);this.L.Pa=1;this.L.Ea=b.length};b.u.prototype.ih=function(a){this.ta={data:a,ub:!1};this.pb||this.ue();for(a=0;a<this.G.length;a++);};b.u.prototype.Ih=function(a){this.L||(this.L=a.createBuffer());a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.L);a.bufferData(a.ELEMENT_ARRAY_BUFFER,new Uint16Array(this.ta.data),a.STATIC_DRAW);this.L.Pa=1;this.L.Ea=this.ta.data.length};b.u.prototype.Hh=function(a,b,c,e){this.wb[b]||(this.wb[b]=a.createBuffer());a.bindBuffer(a.ARRAY_BUFFER,this.wb[b]);a.bufferData(a.ARRAY_BUFFER,
new Float32Array(c),a.STATIC_DRAW);this.wb[b].Pa=e;this.wb[b].Ea=c.length/e};b.u.prototype.ue=function(){var a=[],h=this.cb,c=this.ta.data;if(!c)for(var c=[],e=0;e<h.length/3;e++)c[e]=e;for(e=0;e<c.length;e+=3){var g=[h[3*c[e]],h[3*c[e]+1],h[3*c[e]+2]],g=b.la(b.wd(b.ae([h[3*c[e+1]],h[3*c[e+1]+1],h[3*c[e+1]+2]],g),b.ae([h[3*c[e+2]],h[3*c[e+2]+1],h[3*c[e+2]+2]],g)));void 0==a[c[e]]&&(a[c[e]]=[]);a[c[e]].push(g);void 0==a[c[e+1]]&&(a[c[e+1]]=[]);a[c[e+1]].push(g);void 0==a[c[e+2]]&&(a[c[e+2]]=[]);a[c[e+
2]].push(g)}h=[];for(e=0;e<a.length;e++){var k=g=c=0;if(void 0!=a[e]){for(var f=0;f<a[e].length;f++)c+=a[e][f][0],g+=a[e][f][1],k+=a[e][f][2];c/=a[e].length;g/=a[e].length;k/=a[e].length;h[3*e]=c;h[3*e+1]=g;h[3*e+2]=k}}this.Ze(h)};b.u.prototype.dd=function(a,h){this.c=a;this.pb||this.ue();for(var c=0;8>c;c++)a.disableVertexAttribArray(c);c=this.nf?2*this.ta.data.length:this.ta.data.length;this.ta.ub&&this.L.Ea!=c&&(this.ta.ub=null);!this.ta.ub&&this.ta.data&&0<this.ta.data.length&&(this.nf?this.Kh(a):
this.Ih(a),this.ta.ub=!0);for(c=0;c<this.G.length;c++)this.G[c].ub||(this.Hh(a,this.G[c].name,this.G[c].data,this.G[c].size),this.G[c].ub=!0),attribslot=b.getAttribLocation(a,h,this.G[c].name),-1<attribslot&&(a.bindBuffer(a.ARRAY_BUFFER,this.wb[this.G[c].name]),a.enableVertexAttribArray(attribslot),a.vertexAttribPointer(attribslot,this.wb[this.G[c].name].Pa,a.FLOAT,!1,0,0))}})(EGG);
(function(b){var a=0;b.H=function(h){b.s.Y(this,h);this.b=[];this.ij=[];this.na=[];this.S=[];this.color={r:1,o:1,m:1,bc:1};this.Ta={r:0,o:0,m:0};this.nc=.8;this.Zb=10;this.ib=1;this.Qb=0;this.alpha=1;a++};b.l(b.Z,b.H);b.l(b.da,b.H);b.l(b.Eb,b.H);b.kd=1;b.me=2;b.tf=4;b.ne=8;b.oe=16;b.Af=32;b.zf=64;b.uf=128;b.le=256;b.yf=512;b.xf=1024;b.wf=2048;b.vf=4096;b.ld=8192;b.jd=16384;b.Gb=0;b.Ff=1;b.Wh=3;b.Xh=4;b.Yh=5;b.Vh=6;b.Zh=7;b.uh=0;b.tc=1;b.H.prototype.b=null;b.H.prototype.J="lm1";b.H.prototype.na=null;
b.H.prototype.color=null;b.H.prototype.ya=null;b.H.prototype.Ta=null;b.H.prototype.ib=null;b.H.prototype.Qb=null;b.H.prototype.Zb=null;b.H.prototype.nc=null;b.H.prototype.S=null;b.H.prototype.alpha=null;b.H.prototype.cf=!0;b.H.prototype.Vc=function(a){a.r||(a=b.lb(a));this.color={r:a.r,o:a.o,m:a.m};this.ya||(this.ya={r:a.r,o:a.o,m:a.m});this.fireEvent("sux87",{});return this};b.H.prototype.Td=function(a){a.r||(a=b.lb(a));this.ya={r:a.r,o:a.o,m:a.m};this.color||(this.color={r:a.r,o:a.o,m:a.m});this.fireEvent("sux87",
{});return this};b.H.prototype.cg=function(){return this.ya};b.H.prototype.wk=function(a){a.r||(a=b.lb(a));this.Ta={r:parseFloat(a.r),o:parseFloat(a.o),m:parseFloat(a.m)};this.fireEvent("sux87",{})};b.H.prototype.dh=function(a){this.alpha=a;this.fireEvent("sux87",{});return this};b.H.prototype.bg=function(){return this.alpha};b.H.prototype.vk=function(a){0>=a&&(a=.001);this.Zb=a;this.fireEvent("sux87",{})};b.H.prototype.qd=function(a){function c(){e.fireEvent("sux87",{})}"string"==typeof a&&(a=b.s.get(a));
this.b.push(a);var e=this;this.ij.push(c);a.addEventListener("sux87",c);this.fireEvent("sux87",{})};b.H.prototype.Xi=function(){var a=[];a.push("vec4 texturePos;\n");for(i=0;i<this.b.length;i++)this.b[i].de()||(a.push("textureCoords"+i+"=vec3(0.0,0.0,0.0);\n"),this.b[i].wa!=b.Gb&&this.b[i].wa!=b.Ff||a.push("texturePos=vec4(vec2(UVCoord["+2*this.b[i].wa+"],(1.0-UVCoord["+(2*this.b[i].wa+1)+"])),1.0,1.0);\n"),this.b[i].wa==b.Wh&&a.push("texturePos=vec4(normalize(n.xyz),1.0);\n"),this.b[i].wa==b.Xh&&
a.push("texturePos=vec4(normalize(OBJCoord.xyz),1.0);\n"),this.b[i].wa==b.Yh&&a.push("texturePos=vec4(reflect(normalize(eyevec.xyz),normalize(n.xyz)),1.0);\n"),this.b[i].wa==b.Vh&&a.push("texturePos=envMat * vec4(reflect(normalize(eyevec.xyz),normalize(n.xyz)),1.0);\n"),a.push("textureCoords"+i+"=(layer"+i+"Matrix * texturePos).xyz;\n"));return a.join("")};b.H.prototype.cj=function(){var a=[];for(i=0;i<this.b.length;i++)this.b[i].de()||(a.push("uniform mat4 layer"+i+"Matrix;\n"),a.push("varying vec3 textureCoords"+
i+";\n"));return a.join("")};b.H.prototype.Qd=function(a,b){for(var e=0;e<this.na.length;e++)this.na[e].Qd&&this.na[e].Qd(a,b)};b.H.prototype.Vi=function(a){var c="#ifdef GL_ES\nprecision highp float;\n#endif\n",e=[],g=b.Yc,k=!g;k&&(e=this.na);for(var f=0;f<a.length;f++)if(a[f].type==b.fd||a[f].type==b.wc||a[f].type==b.ke)c=c+"varying vec3 lightvec"+f+";\n",c=c+"varying vec3 lightpos"+f+";\n",a[f].hc()&&(c=c+"varying float lightdist"+f+";\n");c+="varying vec3 n;\nvarying vec3 t;\n";c+="varying vec4 UVCoord;\n";
c+="varying vec3 eyevec;\n";c+="varying vec3 OBJCoord;\n";for(f=0;f<e.length;f++)"et9"==e[f].J&&(c=c+"uniform sampler2D TEXTURE"+f+";\n"),"st7"==e[f].J&&(c=c+"uniform sampler2D TEXTURE"+f+";\n"),"ot0"==e[f].J&&(c=c+"uniform sampler2D TEXTURE"+f+";\n"),"et0"==e[f].J&&(c=c+"uniform samplerCube TEXTURE"+f+";\n");for(var l=0,n=[],m,f=0;f<a.length;f++)c=c+"uniform vec3 lightcolor"+f+";\n",a[f].hc()&&(c=c+"uniform vec3 lightAttenuation"+f+";\n"),c=c+"uniform vec3 lightdir"+f+";\n",a[f].type==b.wc&&(c=c+
"uniform float spotCosCutOff"+f+";\n",c=c+"uniform float spotExp"+f+";\n",c=c+"uniform mat4 lightmat"+f+";\n",c=c+"uniform float shadowbias"+f+";\n",c=c+"uniform int shadowsamples"+f+";\n",c=c+"uniform float shadowsoftness"+f+";\n",c=c+"uniform bool castshadows"+f+";\n",c=c+"varying vec4 spotcoord"+f+";\n",a[f].Bc&&this.cf&&(m=e.length+l++,c=c+"uniform sampler2D TEXTURE"+m+";\n",n[f]=m));if(k)for(f=0;f<this.b.length;f++)this.b[f].de()||(c=c+"varying vec3 textureCoords"+f+";\n"),c=c+"uniform float layeralpha"+
f+";\n",(this.b[f].ka&b.ld)==b.ld&&(c=c+"uniform float layerheight"+f+";\n");c+="uniform vec4 baseColor;\n";c+="uniform vec3 ambColor;\n";c+="uniform vec3 specColor;\n";c+="uniform float shine;\n";c+="uniform float specular;\n";c+="uniform float reflective;\n";c+="uniform float emit;\n";c+="uniform float alpha;\n";c+="uniform vec3 amb;\n";b.Od||(c+="uniform float fognear;\n",c+="uniform float fogfar;\n",c+="uniform int fogtype;\n",c+="uniform vec3 fogcolor;\n");c+="uniform float far;\n";c+="uniform mat4 worldInverseTranspose;\n";
c+="uniform mat4 projection;\n";c+="void main(void)\n";c+="{\n";c+="float att;\n";c+="int texture;\n";c+="float mask=1.0;\n";c+="float spec=specular;\n";c+="vec3 ambC=ambColor;\n";c+="vec3 specC=specColor;\n";c+="vec4 view;\n";c+="vec3 textureCoords=vec3(0.0,0.0,0.0);\n";c+="float ref=reflective;\n";c+="float sh=shine;\n";c+="float em=emit;\n";c+="float al=alpha;\n";c+="vec3 amblight=amb;\n";c+="vec4 normalmap= vec4(n,0.0);\n";c+="vec4 color = baseColor;";c+="float pheight=0.0;\n";c+="vec3 textureHeight=vec3(0.0,0.0,0.0);\n";
c+="vec3 normal = normalize(n);\n";c+="vec3 b = vec3(0.0,0.0,0.0);\n";c+="amblight = amblight * ambC;\n";if(g)f=b.bd?"0.38,0.13,0.12":"0.15,0.15,0.15",c=c+"color = vec4("+(b.bd?"0.38,0.13,0.12":"0.7,0.7,0.7")+",1.0);\n",c=c+"ambC = vec3("+f+");\n",c+="specC = vec3(0.0,0.0,0.0);\n",c+="amblight = amb * ambC;\n";else if(k)for(f=0;f<this.b.length;f++)c=this.b[f].de()?c+"textureCoords=vec3(UVCoord["+2*this.b[f].wa+"],(1.0-UVCoord["+(2*this.b[f].wa+1)+"]),1.0)+textureHeight;\n":c+"textureCoords=textureCoords"+
f+"+textureHeight;\n",c=c+"mask=layeralpha"+f+"*mask;\n",this.b[f].wa==b.Zh&&(c+="view=projection * vec4(-eyevec,1.0);\n",c+="textureCoords=view.xyz/view.w*0.5+0.5;\n",c+="textureCoords=textureCoords+textureHeight;\n"),"et9"==this.b[f].Gd().J||"st7"==this.b[f].Gd().J||"ot0"==this.b[f].Gd().J?(e="xy",g="2D"):(e="xyz",g="Cube"),(this.b[f].ka&b.kd)==b.kd&&(c=this.b[f].Ac==b.tc?c+"color = color*(1.0-mask) + color*texture"+g+"(TEXTURE"+this.b[f].K.ha+", textureCoords."+e+")*mask;\n":c+"color = color*(1.0-mask) + texture"+
g+"(TEXTURE"+this.b[f].K.ha+", textureCoords."+e+")*mask;\n"),(this.b[f].ka&b.ld)==b.ld&&(c=c+"pheight = texture2D(TEXTURE"+this.b[f].K.ha+", textureCoords."+e+").x;\n",c=c+"textureHeight =vec3((layerheight"+f+"* (pheight-0.5)  * normalize(eyevec).xy*vec2(1.0,-1.0)),0.0);\n"),(this.b[f].ka&b.ne)==b.ne&&(c=this.b[f].Ac==b.tc?c+"specC = specC*(1.0-mask) + specC*texture"+g+"(TEXTURE"+this.b[f].K.ha+", textureCoords."+e+").rgb*mask;\n":c+"specC = specC*(1.0-mask) + texture"+g+"(TEXTURE"+this.b[f].K.ha+
", textureCoords."+e+").rgb*mask;\n"),(this.b[f].ka&b.yf)==b.yf&&(c=c+"mask = texture"+g+"(TEXTURE"+this.b[f].K.ha+", textureCoords."+e+").r;\n"),(this.b[f].ka&b.xf)==b.xf&&(c=c+"mask = texture"+g+"(TEXTURE"+this.b[f].K.ha+", textureCoords."+e+").g;\n"),(this.b[f].ka&b.wf)==b.wf&&(c=c+"mask = texture"+g+"(TEXTURE"+this.b[f].K.ha+", textureCoords."+e+").b;\n"),(this.b[f].ka&b.vf)==b.vf&&(c=c+"mask = texture"+g+"(TEXTURE"+this.b[f].K.ha+", textureCoords."+e+").a;\n"),(this.b[f].ka&b.oe)==b.oe&&(c=c+
"spec = spec*(1.0-mask) + texture"+g+"(TEXTURE"+this.b[f].K.ha+", textureCoords."+e+").r*mask;\n"),(this.b[f].ka&b.zf)==b.zf&&(c=c+"ref = ref*(1.0-mask) + texture"+g+"(TEXTURE"+this.b[f].K.ha+", textureCoords."+e+").g*mask;\n"),(this.b[f].ka&b.Af)==b.Af&&(c=c+"sh = sh*(1.0-mask) + texture"+g+"(TEXTURE"+this.b[f].K.ha+", textureCoords."+e+").b*mask*255.0;\n"),(this.b[f].ka&b.uf)==b.uf&&(c=c+"em = em*(1.0-mask) + texture"+g+"(TEXTURE"+this.b[f].K.ha+", textureCoords."+e+").r*mask;\n"),(this.b[f].ka&
b.me)==b.me&&(c=c+"normalmap = normalmap*(1.0-mask) + texture"+g+"(TEXTURE"+this.b[f].K.ha+", textureCoords."+e+")*mask;\n",c+="normal = normalmap.rgb;\n",c+="normal = 2.0*(vec3(normal.r, -normal.g, normal.b) - vec3(0.5, -0.5, 0.5));",c+="b=normalize(cross(t.xyz,n));\n",c+="normal = normal.x*t + normal.y*b + normal.z*n;",c+="normal = normalize(normal);"),(this.b[f].ka&b.le)==b.le&&(c=c+"al = al*(1.0-mask) + 1.0-texture"+g+"(TEXTURE"+this.b[f].K.ha+", textureCoords."+e+").r*mask;\n"),(this.b[f].ka&
b.tf)==b.tf&&(c=c+"al = al*(1.0-mask) + texture"+g+"(TEXTURE"+this.b[f].K.ha+", textureCoords."+e+").a*mask;\n"),(this.b[f].ka&b.jd)==b.jd&&(c=this.b[f].Ac==b.tc?c+"amblight = amblight*(1.0-mask) + amblight*texture"+g+"(TEXTURE"+this.b[f].K.ha+", textureCoords."+e+").rgb*mask;\n":c+"amblight = amblight*(1.0-mask) + texture"+g+"(TEXTURE"+this.b[f].K.ha+", textureCoords."+e+").rgb*mask;\n");this.an&&(c+="if(al<0.5) discard;\n",c+="al=1.0;\n");c+="vec3 lightvalue=vec3(0.0,0.0,0.0);\n";c+="float dotN,spotEffect;";
c+="vec3 lightvec=vec3(0.0,0.0,0.0);";c+="vec3 viewvec=vec3(0.0,0.0,0.0);";c+="vec3 specvalue=vec3(0.0,0.0,0.0);";c+="vec2 scoord=vec2(0.0,0.0);";c+="float spotmul=0.0;";c+="float rnd=0.0;";c+="float spotsampleX=0.0;";c+="float spotsampleY=0.0;";c+="float totalweight=0.0;";c+="int cnt=0;";c+="float specularSmoothStepValue=.125;\n";c+="vec2 spotoffset=vec2(0.0,0.0);";c+="float dp=0.0;";c+="if (normal.z<0.0) {normal.z=0.0;}\n";c+="normal/=length(normal);\n";for(f=0;f<a.length;f++)c=c+"lightvec=lightvec"+
f+";\n",c+="viewvec=eyevec;\n",a[f].type==b.fd&&(c+="dotN=max(dot(normal,normalize(-lightvec)),0.0);\n",c=a[f].hc()?c+"att = 1.0 / (lightAttenuation"+f+"[0] + lightAttenuation"+f+"[1] * lightdist"+f+" + lightAttenuation"+f+"[2] * lightdist"+f+" * lightdist"+f+");\n":c+"att = "+1/a[f].Cc+";\n",c+="if(dotN>0.0){\n",a[f].Ad&&(c=c+"lightvalue += att * dotN * lightcolor"+f+";\n"),c+="}\n",a[f].ib&&(c=c+"specvalue += smoothstep(-specularSmoothStepValue,specularSmoothStepValue,dotN)*att * specC * lightcolor"+
f+" * spec  * pow(max(dot(reflect(normalize(lightvec), normal),normalize(viewvec)),0.0), 0.3*sh);\n")),c+="spotEffect = 0.0;\n",a[f].type==b.wc&&(c=c+"spotEffect = dot(normalize(lightdir"+f+"), normalize(-lightvec"+f+"));",c=c+"if (spotEffect > spotCosCutOff"+f+") {\n",c=c+"spotEffect = pow(spotEffect, spotExp"+f+");",a[f].Bc&&this.cf&&(c=c+"scoord=(((spotcoord"+f+".xy)/spotcoord"+f+".w)+1.0)/2.0;\n",c+="if(scoord.x>0.0 && scoord.x<1.0 && scoord.y>0.0 && scoord.y<1.0){\n",c=c+"vec4 dist=texture2D(TEXTURE"+
n[f]+", scoord);\n",c=c+"float depth = dot(dist, vec4(0.000000059604644775390625,0.0000152587890625,0.00390625,1.0))*"+a[f].Hc+".0;\n",c+="spotmul=0.0;\n",c+="totalweight=0.0;\n",c=c+"if((depth+shadowbias"+f+"-length(lightvec"+f+"))<0.0) {spotmul=1.0; totalweight=1.0;}\n",0<a[f].Sd&&(c+="for(int cnt=0; cnt<4; cnt++){;\n",c+="spotsampleX=-0.707106781;spotsampleY=-0.707106781;\n",c+="if(cnt==0 || cnt==3) spotsampleX=0.707106781;\n",c+="if(cnt==1 || cnt==3) spotsampleY=0.707106781;\n",c+="spotoffset=vec2(spotsampleX,spotsampleY)*0.5;\n",
c=c+"dist=texture2D(TEXTURE"+n[f]+", scoord+spotoffset*shadowsoftness"+f+");\n",c=c+"depth = dot(dist, vec4(0.000000059604644775390625,0.0000152587890625,0.00390625,1.0))*"+a[f].Hc+".0;\n",c=c+"if((depth+shadowbias"+f+"-length(lightvec"+f+"))<0.0){\n",c+="spotmul+=length(spotoffset);\n",c+="}\n",c+="totalweight+=length(spotoffset);\n",c+="};\n",c+="if(totalweight!=spotmul){\n",c+="spotmul=0.0;\n",c+="totalweight=0.0;\n",c=c+"for(int cnt=0; cnt<"+a[f].Sd+"; cnt++){;\n",c+="rnd=(fract(sin(dot(scoord,vec2(12.9898,78.233))) * 43758.5453)-0.5)*2.0;\n",
c=c+"spotsampleX=cos(float(cnt)*"+(360/a[f].Sd).toFixed(2)+"+rnd);\n",c=c+"spotsampleY=sin(float(cnt)*"+(360/a[f].Sd).toFixed(2)+"+rnd);\n",c+="spotoffset=vec2(spotsampleX,spotsampleY)*0.5;\n",c=c+"dist=texture2D(TEXTURE"+n[f]+", scoord+spotoffset*shadowsoftness"+f+");\n",c=c+"depth = dot(dist, vec4(0.000000059604644775390625,0.0000152587890625,0.00390625,1.0))*"+a[f].Hc+".0;\n",c=c+"if((depth+shadowbias"+f+"-length(lightvec"+f+"))<0.0){\n",c+="spotmul+=length(spotoffset);\n",c+="}\n",c+="totalweight+=length(spotoffset);\n",
c+="};\n",c+="}\n"),c+="if(totalweight>0.0) spotEffect=spotEffect*pow(1.0-spotmul/totalweight,3.0);\n",c+="}\n"),c+="dotN=max(dot(normal,normalize(-lightvec)),0.0);\n",a[f].sn?(c+="if(dotN>0.0){\n",a[f].Ad&&(c=c+"lightvalue -= (1.0-spotEffect) / (lightAttenuation"+f+"[0] + lightAttenuation"+f+"[1] * lightdist"+f+" + lightAttenuation"+f+"[2] * lightdist"+f+" * lightdist"+f+");\n"),c+="}\n"):(c=c+"att = spotEffect / (lightAttenuation"+f+"[0] + lightAttenuation"+f+"[1] * lightdist"+f+" + lightAttenuation"+
f+"[2] * lightdist"+f+" * lightdist"+f+");\n",c+="if(dotN>0.0){\n",a[f].Ad&&(c=c+"lightvalue += att * dotN * lightcolor"+f+";\n"),c+="}\n",a[f].ib&&(c=c+"specvalue += smoothstep(-specularSmoothStepValue,specularSmoothStepValue,dotN) * att * specC * lightcolor"+f+" * spec  * pow(max(dot(reflect(normalize(lightvec), normal),normalize(viewvec)),0.0), 0.3 * sh);\n")),c+="}\n"),a[f].type==b.ke&&(c+="dotN=max(dot(normal,-normalize(lightvec)),0.0);\n",a[f].Ad&&(c=c+"lightvalue += dotN * lightcolor"+f+";\n"),
a[f].ib&&(c=c+"specvalue += smoothstep(-specularSmoothStepValue,specularSmoothStepValue,dotN) * specC * lightcolor"+f+" * spec  * pow(max(dot(reflect(normalize(lightvec), normal),normalize(viewvec)),0.0), 0.3 * sh);\n"));b.Od||(c+="float fogfact=1.0;",c=c+"if(fogtype=="+b.Bh+") fogfact=clamp(pow(max((fogfar - length(eyevec)) / (fogfar - fognear),0.0),2.0),0.0,1.0);\n",c=c+"if(fogtype=="+b.zh+") fogfact=clamp((fogfar - length(eyevec)) / (fogfar - fognear),0.0,1.0);\n");c+="lightvalue = (lightvalue)*ref;\n";
b.Od?(c+="if(em>0.0){lightvalue=vec3(1.0,1.0,1.0);}\n",c+="gl_FragColor =vec4(amblight+specvalue.rgb+color.rgb*(em+1.0)*lightvalue.rgb,al);\n"):(c+="if(em>0.0){lightvalue=vec3(1.0,1.0,1.0);  fogfact=1.0;}\n",c+="gl_FragColor =vec4(amblight+specvalue.rgb+color.rgb*(em+1.0)*lightvalue.rgb,al)*fogfact+vec4(fogcolor,al)*(1.0-fogfact);\n");return c+="}\n"};b.H.prototype.Ok=function(a,c,e,g){this.Ib&&this.rd();var k=c.caches,f=[];b.Yc||(f=this.na);k.vi!=this.color&&(this.yi!=this.color&&(this.yi=this.color,
this.ej=new Float32Array([this.color.r,this.color.o,this.color.m,this.color.bc])),a.uniform4fv(b.getUniformLocation(a,c,"baseColor"),this.ej),k.vi=this.color);k.ya!=this.ya&&(this.ri!=this.ya&&(this.ri=this.ya,this.fj=new Float32Array([this.ya.r,this.ya.o,this.ya.m])),a.uniform3fv(b.getUniformLocation(a,c,"ambColor"),this.fj),k.ya=this.ya);k.Ta!=this.Ta&&(this.$j!=this.Ta&&(this.$j=this.Ta,this.gj=new Float32Array([this.Ta.r,this.Ta.o,this.Ta.m])),a.uniform3fv(b.getUniformLocation(a,c,"specColor"),
this.gj),k.Ta=this.Ta);k.ib!=this.ib&&(b.M(a,"1f",b.getUniformLocation(a,c,"specular"),this.ib),k.ib=this.ib);k.Zb!=this.Zb&&(b.M(a,"1f",b.getUniformLocation(a,c,"shine"),this.Zb),k.Zb=this.Zb);k.nc!=this.nc&&(b.M(a,"1f",b.getUniformLocation(a,c,"reflective"),this.nc),k.nc=this.nc);k.Qb!=this.Qb&&(b.M(a,"1f",b.getUniformLocation(a,c,"emit"),this.Qb),k.Qb=this.Qb);k.alpha!=this.alpha&&(b.M(a,"1f",b.getUniformLocation(a,c,"alpha"),this.alpha),k.alpha=this.alpha);var l=0,n=0;k.lightcolor||(k.lightcolor=
[],k.lightAttenuation=[],k.spotCosCutOff=[],k.spotExponent=[],k.shadowbias=[],k.castshadows=[],k.shadowsamples=[],k.shadowsoftness=[]);for(var m=0;m<e.length;m++)k.lightcolor[m]!=e[m].color&&(b.rb(a,b.getUniformLocation(a,c,"lightcolor"+m),e[m].color.r,e[m].color.o,e[m].color.m),k.lightcolor[m]=e[m].color),e[m].hc()&&k.lightAttenuation[m]!=e[m].Cc&&(b.rb(a,b.getUniformLocation(a,c,"lightAttenuation"+m),e[m].Cc,e[m].Oe,e[m].Xe),k.lightAttenuation[m]=e[m].Cc),e[m].type==b.wc&&(k.spotCosCutOff[m]!=e[m].$d&&
(b.M(a,"1f",b.getUniformLocation(a,c,"spotCosCutOff"+m),e[m].$d),k.spotCosCutOff[m]=e[m].$d),k.spotExponent[m]!=e[m].ef&&(b.M(a,"1f",b.getUniformLocation(a,c,"spotExp"+m),e[m].ef),k.spotExponent[m]=e[m].ef),k.shadowbias[m]!=e[m].Zd&&(b.M(a,"1f",b.getUniformLocation(a,c,"shadowbias"+m),e[m].Zd),k.shadowbias[m]=e[m].Zd),k.shadowsoftness[m]!=e[m].df&&(b.M(a,"1f",b.getUniformLocation(a,c,"shadowsoftness"+m),e[m].df),k.shadowsoftness[m]=e[m].df),e[m].Bc&&this.cf&&0==this.Qb&&(n=f.length+l++,a.activeTexture(a["TEXTURE"+
n]),a.bindTexture(a.TEXTURE_2D,e[m].K),b.M(a,"1i",b.getUniformLocation(a,c,"TEXTURE"+n),n)));c.X.Pc||(c.X.Pc=[]);for(m=0;m<this.b.length;m++){this.b[m].Ib&&this.b[m].rd();c.X.Pc[m]?b.Da(this.b[m].mg(),c.X.Pc[m]):c.X.Pc[m]=new Float32Array(this.b[m].mg());try{b.hb(a,b.getUniformLocation(a,c,"layer"+m+"Matrix"),!0,c.X.Pc[m])}catch(r){}b.M(a,"1f",b.getUniformLocation(a,c,"layeralpha"+m),this.b[m].bg());b.M(a,"1f",b.getUniformLocation(a,c,"layerheight"+m),this.b[m].kg())}for(m=0;m<f.length;m++)a.activeTexture(a["TEXTURE"+
m]),f[m].Ob(a,g),b.M(a,"1i",b.getUniformLocation(a,c,"TEXTURE"+m),m)};b.H.prototype.pd=function(a){"string"==typeof a&&(a=b.s.get(a));this.na.push(a);a.ha=this.na.length-1;this.fireEvent("sux87",{});return this}})(EGG);
(function(b){b.g=function(a){b.s.Y(this,a);this.Ac=b.uh};b.l(b.Z,b.g);b.l(b.da,b.g);b.l(b.Eb,b.g);b.g.prototype.J="rm4";b.g.prototype.K=null;b.g.prototype.Ac=null;b.g.prototype.ka=b.kd;b.g.prototype.wa=b.Gb;b.g.prototype.oc=1;b.g.prototype.offsetX=0;b.g.prototype.Sc=0;b.g.prototype.pc=1;b.g.prototype.offsetY=0;b.g.prototype.Vb=0;b.g.prototype.qc=1;b.g.prototype.tj=0;b.g.prototype.Tc=0;b.g.prototype.Dc=0;b.g.prototype.Ji=0;b.g.prototype.xd=0;b.g.prototype.Ec=0;b.g.prototype.Ki=0;b.g.prototype.yd=0;
b.g.prototype.Fc=0;b.g.prototype.Li=0;b.g.prototype.zd=0;b.g.prototype.alpha=1;b.g.prototype.height=.05;b.g.prototype.O=null;b.g.prototype.mg=function(){if(!this.O){var a=this.pg(),h=this.He(),c=this.Fd();this.O=b.v(b.v(b.jb(a.x,a.y,a.z),b.fb(h.x,h.y,h.z)),b.Uc(c.x,c.y,c.z))}return this.O};b.g.prototype.de=function(){var a=this.pg(),h=this.He(),c=this.Fd();return(this.wa==b.Gb||this.wa==b.Ff)&&(h.x=1)&&(h.y=1)&&1==h.z&&0==a.x&&0==a.y&&0==a.z&&0==c.x&&0==c.y&&0==c.z};b.g.prototype.kg=function(){return this.height};
b.g.prototype.dh=function(a){this.alpha=a;return this};b.g.prototype.bg=function(){return this.alpha};b.g.prototype.Xd=function(a){"string"==typeof a&&(a=b.s.get(a));this.K=a;this.fireEvent("sux87",{})};b.g.prototype.Gd=function(){return this.K};b.g.prototype.Yb=function(a){this.ka=a;this.fireEvent("sux87",{})};b.g.prototype.Ud=function(a){this.wa=a;this.fireEvent("sux87",{})};b.g.prototype.pg=function(){var a={};a.x=parseFloat(this.offsetX)+parseFloat(this.Ji);a.y=parseFloat(this.offsetY)+parseFloat(this.Ki);
a.z=parseFloat(this.tj)+parseFloat(this.Li);return a};b.g.prototype.Fd=function(){var a={};a.x=parseFloat(this.Fe())+parseFloat(this.dg());a.y=parseFloat(this.Ed())+parseFloat(this.eg());a.z=parseFloat(this.Ge())+parseFloat(this.fg());return a};b.g.prototype.He=function(){var a={};a.x=parseFloat(this.Ie())+parseFloat(this.gg());a.y=parseFloat(this.qg())+parseFloat(this.hg());a.z=parseFloat(this.rg())+parseFloat(this.ig());return a};b.g.prototype.Ie=function(){return this.oc};b.g.prototype.qg=function(){return this.pc};
b.g.prototype.rg=function(){return this.qc};b.g.prototype.gg=function(){return this.Dc};b.g.prototype.hg=function(){return this.Ec};b.g.prototype.ig=function(){return this.Fc};b.g.prototype.Fe=function(){return this.Sc};b.g.prototype.mh=function(a){this.O=null;this.Vb=a;return this};b.g.prototype.Ed=function(){return this.Vb};b.g.prototype.Ge=function(){return this.Tc};b.g.prototype.dg=function(){return this.xd};b.g.prototype.eg=function(){return this.yd};b.g.prototype.fg=function(){return this.zd};
b.g.prototype.gh=function(a){this.Ac=a;this.fireEvent("sux87",{})}})(EGG);
(function(b){b.Ba=function(a){b.s.Y(this,a);this.ja=[new b.pa]};b.l(b.Z,b.Ba);b.l(b.da,b.Ba);b.Ba.prototype.J="Multilm1";b.Ba.prototype.Wc=function(a){this.ja[0].Wc(a);return this};b.Ba.prototype.Na=function(){return this.ja[0].Na()};b.Ba.prototype.Xc=function(a){this.ja[0].Xc(a);return this};b.Ba.prototype.zb=function(){return this.ja[0].zb()};b.Ba.prototype.Wi=function(a){var b=0,c=this.ja[0];if(1<this.ja.length)for(var e=1;e<this.ja.length;e++){var g=this.ja[e].Fj;g>b&&g<a&&this.ja[e].i&&this.ja[e].i.loaded&&
(b=g,c=this.ja[e])}return c};b.Ba.prototype.ad=function(){for(var a=0;a<this.ja.length;a++)this.ja[a].j=null;return this}})(EGG);
(function(b){b.Ka=function(a){b.s.Y(this,a)};b.l(b.Z,b.Ka);b.l(b.da,b.Ka);b.Ka.prototype.J="et9";b.Ka.prototype.Nc=null;b.Ka.prototype.B=null;b.Ka.prototype.url=null;b.Ka.prototype.Db=function(a){this.url=a;this.state=0;this.Nc=new Image;var b=this;this.Nc.onload=function(){b.state=1};this.Nc.src=a;this.B&&this.c&&(this.c.deleteTexture(this.B),this.B=null);return this};b.Ka.prototype.Ob=function(a){this.c=a;this.B||(this.B=a.createTexture());1==this.state&&(a.bindTexture(a.TEXTURE_2D,this.B),a.texImage2D(a.TEXTURE_2D,
0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,this.Nc),a.bindTexture(a.TEXTURE_2D,null),this.state=2);a.bindTexture(a.TEXTURE_2D,this.B);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.REPEAT);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.REPEAT);return 2==this.state?!0:!1}})(EGG);
(function(b){b.ma=function(a){b.s.Y(this,a)};b.l(b.Z,b.ma);b.l(b.da,b.ma);b.ma.prototype.J="et9";b.ma.prototype.K=null;b.ma.prototype.B=null;b.ma.prototype.object=null;b.ma.prototype.h=null;b.ma.prototype.Ya=0;b.ma.prototype.Za=0;b.ma.prototype.Mg=b.NONE;b.ma.prototype.Qf=b.NONE;b.ma.prototype.qh=function(a){this.h=a;return this};b.ma.prototype.Ob=function(a,h){if(this.h){this.c=a;var c=h.ga(),e=a.D.h.Ma(),g=this.h.fc(),k;if(this.Mg)switch(this.Mg){case b.ni:k=b.v(b.v(b.v(g,c),b.fb(-1,1,1)),b.va(c));
break;case b.oi:k=b.v(b.v(b.v(g,c),b.fb(1,-1,1)),b.va(c));break;case b.pi:k=b.v(b.v(b.v(g,c),b.fb(1,1,-1)),b.va(c))}else k=g;if(this.Qf){var f;switch(this.Qf){case b.$h:f=b.la([-c[0],-c[4],-c[8]]);f=[f[0],f[1],f[2],-b.Ja([c[3],c[7],c[11]],f)];break;case b.ci:f=b.la([c[0],c[4],c[8]]);f=[f[0],f[1],f[2],-b.Ja([c[3],c[7],c[11]],f)];break;case b.ai:f=b.la([-c[1],-c[5],-c[9]]);f=[f[0],f[1],f[2],-b.Ja([c[3],c[7],c[11]],f)];break;case b.di:f=b.la([c[1],c[5],c[9]]);f=[f[0],f[1],f[2],-b.Ja([c[3],c[7],c[11]],
f)];break;case b.bi:f=b.la([-c[2],-c[6],-c[10]]);f=[f[0],f[1],f[2],-b.Ja([c[3],c[7],c[11]],f)];break;case b.ei:f=b.la([c[2],c[6],c[10]]),f=[f[0],f[1],f[2],-b.Ja([c[3],c[7],c[11]],f)]}c=b.Ga(b.va(b.v(e,k)));f=b.qa(c,f);f=b.Zj(f,e[10]);--f[3];e=b.v([1,0,0,0,0,1,0,0,f[0],f[1],f[2],f[3],0,0,0,1],e)}c=this.Ya?this.Ya:a.D.R.canvas.height;f=this.Za?this.Za:a.D.R.canvas.width;if(!this.B||this.update)return this.Bi(a),a.D.Kf(this.ab,k,a.D.h.Ma(),f,c,h),a.bindTexture(a.TEXTURE_2D,this.B),this.update=!1;a.bindTexture(a.TEXTURE_2D,
this.B);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.D.Kf(this.ab,k,e,f,c,h);return!0}return!1};b.ma.prototype.Qd=b.ma.prototype.Ob;b.ma.prototype.Bi=function(a){var b=this.Ya?this.Ya:a.D.R.canvas.height,c=this.Za?this.Za:a.D.R.canvas.width;this.ab||(this.ab=a.createFramebuffer());this.Ub||(this.Ub=
a.createRenderbuffer());this.B||(this.B=a.createTexture());a.bindTexture(a.TEXTURE_2D,this.B);var e=new Uint8Array(c*b*4);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,c,b,0,a.RGBA,a.UNSIGNED_BYTE,e);a.bindFramebuffer(a.FRAMEBUFFER,this.ab);a.bindRenderbuffer(a.RENDERBUFFER,this.Ub);a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_COMPONENT16,c,b);a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,this.Ub);a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,this.B,0);a.bindRenderbuffer(a.RENDERBUFFER,
null);a.bindFramebuffer(a.FRAMEBUFFER,null);a.bindTexture(a.TEXTURE_2D,null)}})(EGG);
(function(b){b.sb=function(a){b.s.Y(this,a);this.canvas=document.createElement("canvas")};b.l(b.Z,b.sb);b.l(b.da,b.sb);b.sb.prototype.J="st7";b.sb.prototype.B=null;b.sb.prototype.ui=!0;b.sb.prototype.kg=function(){return this.canvas.height};b.sb.prototype.Ob=function(a){this.c=a;this.B?(a.bindTexture(a.TEXTURE_2D,this.B),(this.ui||this.Vf)&&this.ce(a)):(this.B=a.createTexture(),a.bindTexture(a.TEXTURE_2D,this.B),this.ce(a));this.Vf=!1;return!0};b.sb.prototype.update=function(){this.Vf=!0};b.sb.prototype.ce=
function(a){var b=this.canvas;a.bindTexture(a.TEXTURE_2D,this.B);try{a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,b)}catch(c){a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,b,null)}a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR);a.generateMipmap(a.TEXTURE_2D)}})(EGG);
(function(b){b.sa=function(a){b.s.Y(this,a)};b.l(b.Z,b.sa);b.l(b.da,b.sa);b.sa.prototype.J="et0";b.sa.prototype.Kj=null;b.sa.prototype.oj=null;b.sa.prototype.Lj=null;b.sa.prototype.pj=null;b.sa.prototype.Mj=null;b.sa.prototype.qj=null;b.sa.prototype.K=null;b.sa.prototype.B=null;b.sa.prototype.Qe=0;b.sa.prototype.Db=function(a,b,c){this.url=a;this.state=0;this[b]=new Image;var e=this;this[b].onload=function(){e.Qe+=c};this[b].src=a;this.B&&this.c&&(this.c.deleteTexture(this.B),this.B=null);return this};
b.sa.prototype.Ob=function(a){this.c=a;this.B||(this.B=a.createTexture());a.bindTexture(a.TEXTURE_CUBE_MAP,this.B);63==this.Qe&&0==this.state&&(a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,this.Kj),a.texImage2D(a.TEXTURE_CUBE_MAP_NEGATIVE_X,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,this.oj),a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_Y,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,this.Lj),a.texImage2D(a.TEXTURE_CUBE_MAP_NEGATIVE_Y,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,this.pj),a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_Z,
0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,this.Mj),a.texImage2D(a.TEXTURE_CUBE_MAP_NEGATIVE_Z,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,this.qj),a.generateMipmap(a.TEXTURE_CUBE_MAP),a.bindTexture(a.TEXTURE_CUBE_MAP,null),this.state=1);a.bindTexture(a.TEXTURE_CUBE_MAP,this.B);return 1==this.state?!0:!1}})(EGG);
(function(b){b.Tb=function(a){b.s.Y(this,a);this.video=document.createElement("video");this.video.style.display="none";this.video.setAttribute("loop","loop");this.video.autoplay=!0;this.video.addEventListener("ended",function(){this.play()},!0);document.getElementsByTagName("body")[0].appendChild(this.video);this.canvas=document.createElement("canvas");this.Fi=this.canvas.getContext("2d")};b.l(b.Z,b.Tb);b.l(b.da,b.Tb);b.Tb.prototype.J="ot0";b.Tb.prototype.B=null;b.Tb.prototype.Db=function(a){this.video.src=
a;return this};b.Tb.prototype.Ob=function(a){this.c=a;this.B||(this.B=a.createTexture());a.bindTexture(a.TEXTURE_2D,this.B);this.Sk(a);return!0};b.Tb.prototype.Sk=function(a){var b=this.video;a.bindTexture(a.TEXTURE_2D,this.B);if(0<b.readyState){0>=b.height&&(b.style.display="",b.height=b.offsetHeight,b.width=b.offsetWidth,b.style.display="none");this.canvas.height=b.height;this.canvas.width=b.width;this.Fi.drawImage(b,0,0);try{a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,this.canvas)}catch(c){a.texImage2D(a.TEXTURE_2D,
0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,this.canvas,null)}a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR);a.generateMipmap(a.TEXTURE_2D)}}})(EGG);
(function(b){b.pa=function(a){b.s.Y(this,a)};b.l(b.Z,b.pa);b.l(b.da,b.pa);b.pa.prototype.i=null;b.pa.prototype.J="do0";b.pa.prototype.V=null;b.pa.prototype.U=null;b.pa.prototype.Va=null;b.pa.prototype.Ha=null;b.pa.prototype.j=null;b.pa.prototype.Fj=0;b.pa.prototype.Wc=function(a){"string"==typeof a&&(a=b.s.get(a));this.i&&this.i.removeEventListener("sux87",this.Lg);var h=this;this.Lg=function(){h.j=null};a.addEventListener("sux87",this.Lg);this.j=null;this.i=a;return this};b.pa.prototype.Na=function(){return this.i};
b.pa.prototype.Xc=function(a){"string"==typeof a&&(a=b.s.get(a));this.V&&this.V.removeEventListener("sux87",this.Jg);var h=this;this.Jg=function(){h.j=null};a.addEventListener("sux87",this.Jg);this.j=null;this.V=a;return this};b.pa.prototype.zb=function(){return this.V}})(EGG);
(function(b){b.A=function(a){b.s.Y(this,a);this.N=[];this.eb=[]};b.l(b.f,b.A);b.l(b.Z,b.A);b.l(b.da,b.A);b.A.prototype.J="to3";b.A.prototype.i=null;b.A.prototype.Jk=null;b.A.prototype.D=null;b.yg();b.A.prototype.V=null;b.A.prototype.c=null;b.A.prototype.N=null;b.A.prototype.fe=!1;b.A.prototype.eb=null;b.A.prototype.id="";b.A.prototype.We=!0;b.A.prototype.Yf=b.sf;b.A.prototype.Hj=1;b.A.prototype.Gi=!1;b.A.prototype.hf=!1;var a=[];a.push("#ifdef GL_ES\nprecision highp float;\n#endif\n");a.push("uniform float distanceToCam;\n");
a.push("varying vec3 eyevec;\n");a.push("void main(void)\n");a.push("{\n");a.push("float depth=length(eyevec);\n");a.push("vec4 rgba=fract(depth/distanceToCam * vec4(16777216.0, 65536.0, 256.0, 1.0));\n");a.push("gl_FragColor=rgba-rgba.rrgb*vec4(0.0,0.00390625,0.00390625,0.00390625);\n");a.push("}\n");b.A.prototype.Ik=a.join("");a=[];a.push("#ifdef GL_ES\nprecision highp float;\n#endif\n");a.push("varying vec3 n;\n");a.push("void main(void)\n");a.push("{\n");a.push("gl_FragColor=vec4(n,1.0);\n");
a.push("}\n");b.A.prototype.rj=a.join("");a=[];a.push("#ifdef GL_ES\nprecision highp float;\n#endif\n");a.push("uniform float far;\n");a.push("uniform vec3 pickcolor;\n");a.push("varying vec3 n;\n");a.push("varying vec4 UVCoord;\n");a.push("void main(void)\n");a.push("{\n");a.push("float Xcoord = gl_FragCoord.x+0.5;\n");a.push("if(Xcoord>0.0) gl_FragColor = vec4(pickcolor,1.0);\n");a.push("if(Xcoord>1.0) gl_FragColor = vec4(n,1.0);\n");a.push("if(Xcoord>2.0){");a.push("vec3 rgb=fract((gl_FragCoord.z/gl_FragCoord.w) * vec3(65536.0, 256.0, 1.0));\n");
a.push("gl_FragColor=vec4(rgb-rgb.rrg*vec3(0.0,0.00390625,0.00390625),1.0);\n");a.push("}");a.push("if(Xcoord>3.0){");a.push("vec3 rgb=fract(UVCoord.x * vec3(65536.0, 256.0, 1.0));\n");a.push("gl_FragColor=vec4(rgb-rgb.rrg*vec3(0.0,0.00390625,0.00390625),1.0);\n");a.push("}");a.push("if(Xcoord>4.0){");a.push("vec3 rgb=fract(UVCoord.y * vec3(65536.0, 256.0, 1.0));\n");a.push("gl_FragColor=vec4(rgb-rgb.rrg*vec3(0.0,0.00390625,0.00390625),1.0);\n");a.push("}");a.push("}\n");b.A.prototype.Gj=a.join("");
b.A.prototype.Vd=function(a){this.We=a;return this};b.A.prototype.yk=function(){this.hf=!0};b.A.prototype.hh=function(a){this.Yf=a};b.A.prototype.ua=function(a){a||(a=0);this.fa||(this.fa=[]);this.te||(this.te=[]);var c=this.ga();if(c!=this.te[a]||!this.fa[a]){for(var e=this.N,g,k=0;k<e.length;k++)e[k].ja[0].i&&(g?g.If(e[k].ja[0].i.ua()):g=e[k].ja[0].i.ua().clone());g||(g=new b.Ua(0,0,0,0,0,0));a?g.sd(this.lg()):g.sd(this.ga());this.fa[a]=g}this.te[a]=c;return this.fa[a]};b.A.prototype.ph=function(a){this.fe=
a;return this};b.A.prototype.Xc=function(a,c){"string"==typeof a&&(a=b.s.get(a));c||(c=0);this.N[c]||(this.N[c]=new b.Ba);this.N[c].zb()!=a&&(this.N[c].Xc(a),this.ad());return this};b.A.prototype.zb=function(a){a||(a=0);return this.N[a]?this.N[a].zb():!1};b.A.prototype.Wc=function(a,c){"string"==typeof a&&(a=b.s.get(a));c||(c=0);this.N[c]||this.N.push(new b.Ba);this.N[c].Wc(a);this.fa=null;return this};b.A.prototype.Na=function(a){a||(a=0);return this.N[a]?this.N[a].Na():!1};b.A.prototype.bf=function(a){for(var c=
0;this.Na(c);)this.Na(c).nf=a,this.Na(c).fireEvent("sux87",{}),c++;a?this.hh(b.rf):this.hh(b.sf)};b.A.prototype.Aa=function(a){this.c=a};b.A.prototype.ad=function(){for(var a=0;a<this.N.length;a++)this.N[a].ad()};b.A.prototype.si=function(a){"string"==typeof a&&(a=b.s.get(a));this.N.push(a);this.fa=null};b.A.prototype.Yi=function(){return this.N};b.A.prototype.ie=function(a){var c=joints1=joints2=!1,e=a.S,g=[],k=!1;this.i.pb||this.i.ue();for(var f=0;f<this.i.G.length;f++)"tangent"==this.i.G[f].name&&
(k=!0),1<this.i.G[f].size?g.push("attribute vec"+this.i.G[f].size+" "+this.i.G[f].name+";\n"):g.push("attribute float "+this.i.G[f].name+";\n"),"UV"==this.i.G[f].name&&(c=!0),"joints1"==this.i.G[f].name&&(joints1=this.i.G[f]),"joints2"==this.i.G[f].name&&(joints2=this.i.G[f]);g.push("uniform mat4 worldView;\n");g.push("uniform mat4 projection;\n");g.push("uniform mat4 worldInverseTranspose;\n");g.push("uniform mat4 envMat;\n");for(f=0;f<e.length;f++)g.push("uniform vec3 lightpos"+f+";\n"),g.push("uniform vec3 lightdir"+
f+";\n"),g.push("uniform mat4 lightmat"+f+";\n"),g.push("varying vec4 spotcoord"+f+";\n");g.push("varying vec3 eyevec;\n");for(f=0;f<e.length;f++)g.push("varying vec3 lightvec"+f+";\n"),e[f].hc()&&g.push("varying float lightdist"+f+";\n");this.i.$&&0<this.i.$.length&&g.push("uniform vec4 jointMat["+3*this.i.$.length+"];\n");this.V&&g.push(this.V.cj());g.push("varying vec3 n;\n");g.push("varying vec3 t;\n");g.push("varying vec4 UVCoord;\n");g.push("varying vec3 OBJCoord;\n");g.push("void main(void)\n");
g.push("{\n");c?g.push("UVCoord=UV;\n"):g.push("UVCoord=vec4(0.0,0.0,0.0,0.0);\n");g.push("OBJCoord = position;\n");g.push("vec3 tang;\n");g.push("vec4 pos = vec4(0.0, 0.0, 0.0, 1.0);\n");g.push("vec4 norm = vec4(0.0, 0.0, 0.0, 1.0);\n");g.push("vec4 tang4 = vec4(0.0, 0.0, 0.0, 1.0);\n");if(joints1){if(1==joints1.size)g.push("pos += vec4(dot(jointMat[int(3.0*joints1)],vec4(position,1.0)),\n              dot(jointMat[int(3.0*joints1+1.0)],vec4(position,1.0)),\n              dot(jointMat[int(3.0*joints1+2.0)],vec4(position,1.0)),1.0)*weights1;\n"),
g.push("norm += vec4(dot(jointMat[int(3.0*joints1)].xyz,normal),\n               dot(jointMat[int(3.0*joints1+1.0)].xyz,normal),\n               dot(jointMat[int(3.0*joints1+2.0)].xyz,normal),1.0)*weights1;\n"),k&&g.push("tang4 += vec4(dot(jointMat[int(3.0*joints1)].xyz,tangent),\n               dot(jointMat[int(3.0*joints1+1.0)].xyz,tangent),\n               dot(jointMat[int(3.0*joints1+2.0)].xyz,tangent),1.0)*weights1;\n");else for(f=0;f<joints1.size;f++)g.push("pos += vec4(dot(jointMat[int(3.0*joints1["+
f+"])],vec4(position,1.0)),\n              dot(jointMat[int(3.0*joints1["+f+"]+1.0)],vec4(position,1.0)),\n              dot(jointMat[int(3.0*joints1["+f+"]+2.0)],vec4(position,1.0)),1.0)*weights1["+f+"];\n"),g.push("norm += vec4(dot(jointMat[int(3.0*joints1["+f+"])].xyz,normal),\n               dot(jointMat[int(3.0*joints1["+f+"]+1.0)].xyz,normal),\n               dot(jointMat[int(3.0*joints1["+f+"]+2.0)].xyz,normal),1.0)*weights1["+f+"];\n"),k&&g.push("tang4 += vec4(dot(jointMat[int(3.0*joints1["+
f+"])].xyz,tangent),\n               dot(jointMat[int(3.0*joints1["+f+"]+1.0)].xyz,tangent),\n               dot(jointMat[int(3.0*joints1["+f+"]+2.0)].xyz,tangent),1.0)*weights1["+f+"];\n");if(joints2)if(1==joints2.size)g.push("pos += vec4(dot(jointMat[int(3.0*joints2)],vec4(position,1.0)),\n              dot(jointMat[int(3.0*joints2+1.0)],vec4(position,1.0)),\n              dot(jointMat[int(3.0*joints2+2.0)],vec4(position,1.0)),1.0)*weights2;\n"),g.push("norm += vec4(dot(jointMat[int(3.0*joints2)].xyz,normal),\n               dot(jointMat[int(3.0*joints2+1.0)].xyz,normal),\n               dot(jointMat[int(3.0*joints2+2.0)].xyz,normal),1.0)*weights2;\n"),
k&&g.push("tang4 += vec4(dot(jointMat[int(3.0*joints2)].xyz,tangent),\n               dot(jointMat[int(3.0*joints2+1.0)].xyz,tangent),\n               dot(jointMat[int(3.0*joints2+2.0)].xyz,tangent),1.0)*weights2;\n");else for(f=0;f<joints2.size;f++)g.push("pos += vec4(dot(jointMat[int(3.0*joints2["+f+"])],vec4(position,1.0)),\n              dot(jointMat[int(3.0*joints2["+f+"]+1.0)],vec4(position,1.0)),\n              dot(jointMat[int(3.0*joints2["+f+"]+2.0)],vec4(position,1.0)),1.0)*weights2["+f+
"];\n"),g.push("norm += vec4(dot(jointMat[int(3.0*joints2["+f+"])].xyz,normal),\n               dot(jointMat[int(3.0*joints2["+f+"]+1.0)].xyz,normal),\n               dot(jointMat[int(3.0*joints2["+f+"]+2.0)].xyz,normal),1.0)*weights2["+f+"];\n"),k&&g.push("tang4 += vec4(dot(jointMat[int(3.0*joints2["+f+"])].xyz,tangent),\n               dot(jointMat[int(3.0*joints2["+f+"]+1.0)].xyz,tangent),\n               dot(jointMat[int(3.0*joints2["+f+"]+2.0)].xyz,tangent),1.0)*weights2["+f+"];\n");for(f=0;f<
e.length;f++)g.push("spotcoord"+f+"=lightmat"+f+"*vec4(pos.xyz,1.0);\n");g.push("pos = worldView * vec4(pos.xyz, 1.0);\n");g.push("norm = worldInverseTranspose * vec4(norm.xyz, 1.0);\n");k&&g.push("tang = (worldInverseTranspose*vec4(tang4.xyz,1.0)).xyz;\n")}else{for(f=0;f<e.length;f++)g.push("spotcoord"+f+"=lightmat"+f+"*vec4(position,1.0);\n");g.push("pos = worldView * vec4(position, 1.0);\n");g.push("norm = worldInverseTranspose * vec4(normal, 1.0);\n");k&&g.push("tang = (worldInverseTranspose*vec4(tangent,1.0)).xyz;\n")}g.push("gl_Position = projection * pos;\n");
g.push("gl_PointSize="+this.Hj.toFixed(5)+";\n");g.push("eyevec = -pos.xyz;\n");g.push("t = normalize(tang);");g.push("n = normalize(norm.rgb);");for(f=0;f<e.length;f++)e[f].sg()==b.ke?g.push("lightvec"+f+" = -lightdir"+f+";\n"):g.push("lightvec"+f+" = -(lightpos"+f+"-pos.xyz);\n"),e[f].hc()&&g.push("lightdist"+f+" = length(lightpos"+f+".xyz-pos.xyz);\n");this.V&&g.push(this.V.Xi());g.push("}\n");g=g.join("");this.V?c=this.V.Vi(e):(c=[],c.push("void main(void)\n"),c.push("{\n"),c.push("gl_FragColor = vec4(1.0,1.0,1.0,1.0);\n"),
c.push("}\n"),c=c.join(""));this.Eh=b.Rb(a,a.FRAGMENT_SHADER,this.rj);this.Gh=b.Rb(a,a.FRAGMENT_SHADER,this.Ik);this.Fh=b.Rb(a,a.FRAGMENT_SHADER,this.Gj);this.Fb=b.Rb(a,a.FRAGMENT_SHADER,c);this.Wa=b.Rb(a,a.VERTEX_SHADER,g);this.Va=b.Kc(a,this.Wa,this.Fh);this.Ha=b.Kc(a,this.Wa,this.Gh);this.vc=b.Kc(a,this.Wa,this.Eh);this.j=b.Kc(a,this.Wa,this.Fb)};b.A.prototype.Ci=function(a){this.c&&(this.i=a.i,this.V=a.V,this.ie(this.c),a.Va=this.Va,a.Ha=this.Ha,a.j=this.j)};b.A.prototype.Lh=function(a,c,e){var g;
switch(c){case b.kb:g=this.j;break;case b.zc:g=this.Ha;break;case b.pe:g=this.vc;break;case b.yc:g=this.Va;var k=e>>16&255,f=e>>8&255;e=e&255;b.rb(a,b.getUniformLocation(a,g,"pickcolor"),e/255,f/255,k/255)}g.caches||(g.caches={});g.X||(g.X={});e=g.caches;var k=g.X,f=a.D,l=f.h;e.Ca!=l.Ca&&(b.M(a,"1f",b.getUniformLocation(a,g,"far"),l.Ca),e.Ca=l.Ca);if(c==b.kb){if(e.Hb!=f.Hb){var n=f.Hb;b.rb(a,b.getUniformLocation(a,g,"amb"),n.r,n.o,n.m);e.Hb=n}b.Od||(e.Ic!=f.Ic&&(b.M(a,"1f",b.getUniformLocation(a,
g,"fogfar"),f.Ic),e.Ic=f.Ic),e.Jc!=f.Jc&&(b.M(a,"1f",b.getUniformLocation(a,g,"fognear"),f.Jc),e.Jc=f.Jc),e.dc!=f.dc&&(b.M(a,"1i",b.getUniformLocation(a,g,"fogtype"),f.dc),e.dc=f.dc),e.dc!=f.$f&&(b.rb(a,b.getUniformLocation(a,g,"fogcolor"),f.Cd.r,f.Cd.o,f.Cd.m),e.$f=f.$f))}n=l.fc();f=this.ga();e.Sb||(e.Sb={Mb:null,bb:null});var m=e.Sb;if(m.we!=n||m.bb!=f){this.caches.Sb||(this.caches.Sb=b.v(n,f));mvMatrix=this.caches.Sb;this.i.$&&(mvMatrix=n);var r=b.getUniformLocation(a,g,"worldView");k.Sb?b.Da(b.Ga(mvMatrix),
k.Ng):k.Ng=new Float32Array(b.Ga(mvMatrix));k.Sb=mvMatrix;b.hb(a,r,!1,g.X.Ng);if(r=b.getUniformLocation(a,g,"envMat")){if(!this.caches.Bd){var p=b.va(mvMatrix);p[3]=0;p[7]=0;p[11]=0;this.caches.Bd=p}p=this.caches.Bd;g.X.Bd?b.Da(b.Ga(p),k.Zf):k.Zf=new Float32Array(b.Ga(p));k.Bd=p;b.hb(a,r,!1,k.Zf)}this.caches.kc||(r=b.va(mvMatrix),this.caches.kc=r);r=this.caches.kc;p=b.getUniformLocation(a,g,"worldInverseTranspose");k.kc?b.Da(r,k.kc):k.kc=new Float32Array(r);b.hb(a,p,!1,k.kc);r=b.getUniformLocation(a,
g,"view");k.Mb?b.Da(b.Ga(n),k.Of):k.Of=new Float32Array(b.Ga(n));k.Mb=n;b.hb(a,r,!1,k.Of);m.we=n;m.bb=f}m=b.getUniformLocation(a,g,"projection");k.aa?b.Da(b.Ga(l.Ma()),k.Rg):k.Rg=new Float32Array(b.Ga(l.Ma()));k.aa=l.Ma();b.hb(a,m,!1,k.Rg);if(c==b.kb||c==b.zc){var q=a.S;e.S||(e.S=[]);k.S||(k.S=[]);this.caches.S||(this.caches.S=[]);m=e.S;for(l=0;l<q.length;l++)if(m[l]||(m[l]={bb:null,Mb:null}),m[l].bb!=f||m[l].Mb!=n)this.caches.S[l]||(this.caches.S[l]={}),this.caches.S[l].Wg||(this.caches.S[l].Wg=
b.qa(b.v(n,q[l].ga()),[0,0,0,1])),r=this.caches.S[l].Wg,b.rb(a,b.getUniformLocation(a,g,"lightpos"+l),r[0],r[1],r[2]),this.caches.S[l].Fg||(this.caches.S[l].Fg=b.qa(b.v(n,q[l].ga()),[0,0,1,1])),p=this.caches.S[l].Fg,b.rb(a,b.getUniformLocation(a,g,"lightdir"+l),p[0]-r[0],p[1]-r[1],p[2]-r[2]),q[l].Fa&&(r=b.v(q[l].Fa.Kk,f),k.S[l]?b.Da(r,k.S[l]):k.S[l]=new Float32Array(r),b.hb(a,b.getUniformLocation(a,g,"lightmat"+l),!0,k.S[l])),m[l].bb=f,m[l].Mb=n}if(this.i.$){e.$||(e.$=[]);k.$||(k.$=[]);k.Id||(k.Id=
[]);k.Jd||(k.Jd=[]);k.Hd&&k.Hd.length==12*this.i.$.length||(k.Hd=new Float32Array(12*this.i.$.length));e=e.$;b.yg();for(l=0;l<this.i.$.length;l++)if(e[l]||(e[l]={bb:null,Oc:null}),"string"==typeof this.i.$[l]?(this.se||(this.se=this.Jk.Ce()),this.se&&(f=this.se[this.i.$[l]].ga())):f=this.i.$[l].ga(),n=this.i.Oc[l],e[l].bb!=f||e[l].Oc!=n)m=b.v(f,n),k.$[l]?b.Da(b.Ga(m),k.Id[l]):k.Id[l]=new Float32Array(b.Ga(m)),k.$[l]=m,k.Jd[l]?b.Da(b.va(m),k.Jd[l]):k.Jd[l]=new Float32Array(b.va(m)),m=k.Id[l],r=k.Hd,
r[12*l]=m[0],r[12*l+1]=m[4],r[12*l+2]=m[8],r[12*l+3]=m[12],r[12*l+4]=m[1],r[12*l+5]=m[5],r[12*l+6]=m[9],r[12*l+7]=m[13],r[12*l+8]=m[2],r[12*l+9]=m[6],r[12*l+10]=m[10],r[12*l+11]=m[14],e[l].bb=f,e[l].Oc=n;a.uniform4fv(b.getUniformLocation(a,g,"jointMat"),k.Hd)}this.V&&c==b.kb&&a.D.Ne!=this.V&&(this.V.Ok(a,g,q,this),a.D.Ne=this.V)};b.A.prototype.vb=function(a,c,e,g,k){if(a){this.c||this.Aa(a);this.nb&&this.gd(this.nb);c==b.kb&&this.Ib&&this.rd();this.eb[c]||(this.eb[c]={});var f=a.D.h.fc(),l=this.ga();
if(this.eb[c].we!=f||this.eb[c].bb!=l)this.eb[c]={},this.eb[c].we=f,this.eb[c].bb=l;this.caches=this.eb[c];var n;void 0==g?(f=0,g=this.N.length):(f=g,g+=1);for(;f<g;f++)if(1<this.N[f].ja.length&&!n&&(n=a.D.h.ec(),l=this.ec(),n=b.Bg([n.x-l.x,n.y-l.y,n.z-l.z]),n=b.qa(a.D.h.Ma(),[this.ua().Zg,0,-n,1]),n=n[0]/n[3]*a.D.R.canvas.width),l=this.N[f].Wi(n),l.i&&l.i.loaded){if(c==b.Df){l.V&&l.V.Qd(a,this);break}l.j?(this.Va=l.Va,this.Ha=l.Ha,this.j=l.j):this.Ci(l);this.i=l.i;this.V=l.V;switch(this.Yf){case b.rf:l=
a.LINES;break;case b.yh:l=a.POINTS;break;case b.wh:l=a.LINE_LOOP;break;case b.xh:l=a.LINE_STRIP;break;default:l=a.TRIANGLES}switch(c){case b.kb:a.U!=this.j&&(a.useProgram(this.j),a.U=this.j);this.i.dd(a,this.j);break;case b.zc:a.U!=this.Ha&&(a.useProgram(this.Ha),a.U=this.Ha);b.M(a,"1f",b.getUniformLocation(a,this.Ha,"distanceToCam"),k);this.i.dd(a,this.Ha);break;case b.pe:a.U!=this.vc&&(a.useProgram(this.vc),a.U=this.vc);this.i.dd(a,this.vc);break;case b.yc:a.U!=this.Va&&(a.useProgram(this.Va),a.U=
this.Va),this.i.dd(a,this.Va),l=a.TRIANGLES}this.Lh(a,c,e);switch(this.i.mf){case b.u.Hf:a.disable(a.CULL_FACE);break;case b.u.Gf:a.cullFace(a.FRONT)}this.i.L?(this.hf&&(a.enable(a.CULL_FACE),a.cullFace(a.FRONT)),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.i.L),a.drawElements(l,this.i.L.Ea,a.UNSIGNED_SHORT,0),this.hf&&(a.cullFace(a.BACK),a.drawElements(l,this.i.L.Ea,a.UNSIGNED_SHORT,0))):a.drawArrays(l,0,this.i.cb.length/3);switch(this.i.mf){case b.u.Hf:a.D.R.Hi&&a.enable(a.CULL_FACE);break;case b.u.Gf:a.cullFace(a.BACK)}l=
this.caches;this.O=this.O;this.caches=l}}}})(EGG);
(function(b){b.ca=function(a){b.s.Y(this,a);this.canvas=document.createElement("canvas");this.color={r:1,o:1,m:1}};b.l(b.f,b.ca);b.l(b.Z,b.ca);b.l(b.da,b.ca);b.ca.prototype.J="tt1";b.ca.prototype.fe=!0;b.ca.prototype.canvas=null;b.ca.prototype.Jb=1;b.ca.prototype.color=null;b.ca.prototype.text="";b.ca.prototype.font="Times";b.ca.prototype.size=100;b.ca.prototype.Ej=b.Ef;b.ca.prototype.Vc=function(a){a=b.lb(a);this.color={r:a.r,o:a.o,m:a.m};return this};b.ca.prototype.ph=function(a){this.fe=a;return this};
b.ca.prototype.ie=function(a){this.j&&a.deleteProgram(this.j);var h;h="attribute vec3 position;\nattribute vec2 uvcoord;\n";h+="varying vec2 texcoord;\n";h+="uniform mat4 Matrix;\n";h+="uniform mat4 PMatrix;\n";h+="varying vec4 pos;\n";h+="void main(void){\n";h+="texcoord=uvcoord;\n";h+="pos = Matrix * vec4(position,1.0);\n";h+="gl_Position = PMatrix * pos;\n";h+="}\n";var c;c="#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D TEXTURE;\nvarying vec2 texcoord;\n";c+="varying vec4 pos;\n";
c+="uniform float far;\n";c+="uniform int picktype;\n";c+="uniform vec3 pickcolor;\n";c+="uniform vec3 color;\n";c+="void main(void){\n";c+="float alpha=texture2D(TEXTURE,texcoord).a;\n";c=c+"if(picktype=="+b.li+"){gl_FragColor = vec4(pickcolor,1.0);}";c=c+"else if(picktype=="+b.Ef+"){gl_FragColor = vec4(pickcolor,alpha);}";c+="else{gl_FragColor = vec4(color.rgb*alpha,alpha);};\n";c+="}\n";this.Fb=a.createShader(a.FRAGMENT_SHADER);this.Wa=a.createShader(a.VERTEX_SHADER);a.shaderSource(this.Fb,c);
a.compileShader(this.Fb);a.getShaderParameter(this.Fb,a.COMPILE_STATUS)?(a.shaderSource(this.Wa,h),a.compileShader(this.Wa),a.getShaderParameter(this.Wa,a.COMPILE_STATUS)?(this.j=a.createProgram(),a.attachShader(this.j,this.Wa),a.attachShader(this.j,this.Fb),a.linkProgram(this.j)):b.error(a.getShaderInfoLog(this.Wa))):b.error(a.getShaderInfoLog(this.Fb))};b.ca.prototype.Aa=function(a){this.c=a;this.xe(a);this.ie(a);this.B=a.createTexture();this.ce(a)};b.ca.prototype.ce=function(a){var b=this.canvas;
b.width=1;b.height=1.2*this.size;var c=b.getContext("2d");c.font=this.size+"px "+this.font;b.width=c.measureText(this.text).width;b.height=1.2*this.size;c=b.getContext("2d");c.textBaseline="top";c.font=this.size+"px "+this.font;this.Jb=b.width/b.height;c.fillText(this.text,0,0);a.bindTexture(a.TEXTURE_2D,this.B);try{a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,b)}catch(e){a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,b,null)}a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,
a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.bindTexture(a.TEXTURE_2D,null)};b.ca.prototype.vb=function(a,h,c){this.c||this.Aa(a);if(h==b.kb||h==b.yc){this.nb&&this.gd(this.nb);a.U!=this.j&&(a.useProgram(this.j),a.U=this.j);var e;for(e=0;8>e;e++)a.disableVertexAttribArray(e);e=b.getAttribLocation(a,this.j,"position");a.bindBuffer(a.ARRAY_BUFFER,this.xa);
a.enableVertexAttribArray(e);a.vertexAttribPointer(e,this.xa.Pa,a.FLOAT,!1,0,0);e=b.getAttribLocation(a,this.j,"uvcoord");a.bindBuffer(a.ARRAY_BUFFER,this.sc);a.enableVertexAttribArray(e);a.vertexAttribPointer(e,this.sc.Pa,a.FLOAT,!1,0,0);a.activeTexture(a.TEXTURE0);a.bindTexture(a.TEXTURE_2D,this.B);b.M(a,"1i",b.getUniformLocation(a,this.j,"TEXTURE"),0);c||(c=0);e=c>>16&255;var g=c>>8&255;c=c&255;b.rb(a,b.getUniformLocation(a,this.j,"pickcolor"),c/255,g/255,e/255);h==b.yc?b.M(a,"1i",b.getUniformLocation(a,
this.j,"picktype"),this.Ej):b.M(a,"1i",b.getUniformLocation(a,this.j,"picktype"),0);this.j.X||(this.j.X={});h=this.size/100;h=b.v(a.D.h.fc(),b.v(this.ga(),b.fb(this.Jb*h,h,h)));c=b.getUniformLocation(a,this.j,"Matrix");this.j.X.Te?b.Da(h,this.j.X.Te):this.j.X.Te=new Float32Array(h);b.hb(a,c,!0,this.j.X.Te);c=b.getUniformLocation(a,this.j,"PMatrix");this.j.X.aa?b.Da(a.D.h.Ma(),this.j.X.aa):this.j.X.aa=new Float32Array(a.D.h.Ma());b.hb(a,c,!0,this.j.X.aa);h=b.getUniformLocation(a,this.j,"far");b.M(a,
"1f",h,a.D.h.Ca);b.rb(a,b.getUniformLocation(a,this.j,"color"),this.color.r,this.color.o,this.color.m);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.L);a.drawElements(a.TRIANGLES,this.L.Ea,a.UNSIGNED_SHORT,0);a.D.Ne=null}};b.ca.prototype.xe=function(a){this.xa||(this.xa=a.createBuffer());a.bindBuffer(a.ARRAY_BUFFER,this.xa);a.bufferData(a.ARRAY_BUFFER,new Float32Array([1,1,0,-1,1,0,-1,-1,0,1,-1,0]),a.STATIC_DRAW);this.xa.Pa=3;this.xa.Ea=4;this.sc||(this.sc=a.createBuffer());a.bindBuffer(a.ARRAY_BUFFER,
this.sc);a.bufferData(a.ARRAY_BUFFER,new Float32Array([0,0,1,0,1,1,0,1]),a.STATIC_DRAW);this.sc.Pa=2;this.sc.Ea=4;this.L||(this.L=a.createBuffer());a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.L);a.bufferData(a.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,2,3,0]),a.STATIC_DRAW);this.L.Pa=1;this.L.Ea=6}})(EGG);
(function(b){b.ra=function(a,h){this.viewport=[];this.canvas=a;try{this.c=a.getContext("webgl",{alpha:!0,depth:!0,stencil:!0,antialias:!0,premultipliedAlpha:!0})}catch(e){}if(!this.c)try{this.c=a.getContext("experimental-webgl",{alpha:!0,depth:!0,stencil:!0,antialias:!0,premultipliedAlpha:!0})}catch(e){}if(!this.c){console.log("EGG err:","undefined"==typeof globalNoWebGLError);if(h||"undefined"!=typeof globalNoWebGLError)h();else{var c=document.createElement("div");c.setAttribute("style","position: absolute; top: 10px; left: 10px; font-family: sans-serif; font-size: 14px; padding: 10px;background-color: #fcffcb;color: #800; width: 200px; border:2px solid #f00");
c.innerHTML="Cannot detect webgl please download a compatible browser";document.getElementsByTagName("body")[0].appendChild(c)}throw"cannot create webgl context";}try{this.c.canvas=a}catch(e){}this.c.getProgramParameter||(this.c.getProgramParameter=this.c.jn);this.c.getShaderParameter||(this.c.getShaderParameter=this.c.kn);this.c.Qk=this.c.uniformMatrix4fv;this.c.uniformMatrix4fv=function(a,c,h){c&&b.Da(b.Ga(h),h);this.Qk(a,!1,h)};this.c.clearDepth(1);this.c.enable(this.c.DEPTH_TEST);this.c.depthFunc(this.c.LEQUAL);
this.c.blendFuncSeparate(this.c.SRC_ALPHA,this.c.ONE_MINUS_SRC_ALPHA,this.c.ZERO,this.c.ONE)};b.l(b.Z,b.ra);b.ra.prototype.c=null;b.ra.prototype.D=null;b.qf=1;b.pf=2;b.of=4;b.vh=7;b.ra.prototype.Ai=b.vh;b.ra.prototype.Fk=function(a){this.viewport[0]=a};b.ra.prototype.Ek=function(a){this.viewport[1]=a};b.ra.prototype.wg=function(){return 0<this.viewport.length?this.viewport[0]:this.canvas.width};b.ra.prototype.Je=function(){return 1<this.viewport.length?this.viewport[1]:this.canvas.height};b.ra.prototype.ug=
function(){return 2<this.viewport.length?this.viewport[2]:0};b.ra.prototype.vg=function(){return 3<this.viewport.length?this.viewport[3]:0};b.ra.prototype.Ch=function(){var a=this.c,h=this.Ai,c=0;h&b.of==b.of&&(c|=a.COLOR_BUFFER_BIT);h&b.pf==b.pf&&(c|=a.DEPTH_BUFFER_BIT);h&b.qf==b.qf&&(c|=a.STENCIL_BUFFER_BIT);a.clear(c)};b.ra.prototype.Hk=function(a){a.R=this;this.D=a;a.Aa(this.c);this.Rc();a.h.O=null};b.ra.prototype.Rc=function(){this.Hi&&this.c.enable(this.c.CULL_FACE);this.D&&this.D.Rc(this.c);
!this.Wj&&this.D&&(this.D.Rc(this.c),this.Wj=!0)}})(EGG);
(function(b){b.uc=1;b.he=2;b.T=function(a){b.s.Y(this,a)};b.l(b.f,b.T);b.l(b.Z,b.T);b.l(b.da,b.T);b.T.prototype.J="ac3";b.T.prototype.ag=35;b.T.prototype.Jb=1;b.T.prototype.Og=.1;b.T.prototype.Ca=1E3;b.T.prototype.Pd=5;b.T.prototype.type=b.uc;b.T.prototype.aa=null;b.T.prototype.jk=function(){this.Ca=100};b.T.prototype.sg=function(){return this.type};b.T.prototype.nh=function(a){a==b.uc||a==b.he?(this.type=a,this.aa=null):b.error("unsuported camera type");return this};b.T.prototype.jh=function(){this.type==
b.uc?(this.ag=35,this.aa=null):b.error("You may only set a yfov for a perspective camera")};b.T.prototype.eh=function(a){this.type==b.uc||this.type==b.he?(this.Jb=a,this.aa=null):b.error("You may only set a aspect for a perspective or orthographic camera")};b.T.prototype.Ma=function(){if(!this.aa)switch(this.type){case b.uc:this.aa=b.Hg(this.ag,this.Jb,this.Og,this.Ca);break;case b.he:this.aa=b.Gg(-this.Pd*this.Jb,this.Pd*this.Jb,-this.Pd,this.Pd,this.Og,this.Ca)}return this.aa};b.T.prototype.Wd=
function(a){this.aa=a};b.T.prototype.za=function(){var a=this.ec(),a=b.jb(a.x,a.y,a.z),a=b.v(a,this.Ee());this.parent&&(a=b.v(this.parent.ga(),a));this.O=b.va(a)};b.T.prototype.fc=function(){this.O&&this.Wb||this.za();return this.O};b.T.prototype.tg=function(){var a=this.Ma(),h=this.fc();if(a!=this.Uk||h!=this.Vk)this.wi=b.v(a,h),this.Uk=a,this.Vk=h;return this.wi}})(EGG);
(function(b){b.F=function(a){b.s.Y(this,a);this.color={r:1,o:1,m:1}};b.l(b.f,b.F);b.l(b.Z,b.F);b.l(b.da,b.F);b.F.prototype.J="tl5";b.fd=1;b.ke=2;b.wc=3;b.F.prototype.Cc=1;b.F.prototype.Oe=0;b.F.prototype.Xe=0;b.F.prototype.$d=.95;b.F.prototype.ff=null;b.F.prototype.ef=10;b.F.prototype.color=null;b.F.prototype.Ad=!0;b.F.prototype.ib=!0;b.F.prototype.Sd=0;b.F.prototype.df=.01;b.F.prototype.type=b.fd;b.F.prototype.ab=null;b.F.prototype.Ub=null;b.F.prototype.K=null;b.F.prototype.Ya=256;b.F.prototype.Za=
256;b.F.prototype.Zd=2;b.F.prototype.Hc=100;b.F.prototype.Bc=!1;b.F.prototype.hc=function(){return 0!=this.Oe||0!=this.Xe};b.F.prototype.De=function(){if(!this.ff){var a;this.D&&this.D.h?a=this.D.h.Ca:a=1E3;this.ff=b.Hg(Math.acos(this.$d)/3.14159*360,1,.1,a)}return this.ff};b.F.prototype.fk=function(){this.Bc=!1};b.F.prototype.uk=function(){this.Zd=1};b.F.prototype.ck=function(){this.Cc=.7;this.Xe=this.Oe=0};b.F.prototype.Vc=function(a){a=b.lb(a);this.color={r:a.r,o:a.o,m:a.m};return this};b.F.prototype.sg=
function(){return this.type};b.F.prototype.nh=function(a){this.type=a;return this};b.F.prototype.Aa=function(a){this.c=a;this.type!=b.wc||this.K||this.Di(a)};b.F.prototype.Di=function(a){this.ab=a.createFramebuffer();this.Ub=a.createRenderbuffer();this.K=a.createTexture();a.bindTexture(a.TEXTURE_2D,this.K);try{a.texImage2D(a.TEXTURE_2D,0,a.RGBA,this.Za,this.Ya,0,a.RGBA,a.UNSIGNED_BYTE,null)}catch(b){var h=new Uint8Array(this.Za*this.Ya*4);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,parseFloat2(this.Za),parseFloat2(this.Ya),
0,a.RGBA,a.UNSIGNED_BYTE,h)}a.bindFramebuffer(a.FRAMEBUFFER,this.ab);a.bindRenderbuffer(a.RENDERBUFFER,this.Ub);a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_COMPONENT16,this.Za,this.Ya);a.bindRenderbuffer(a.RENDERBUFFER,null);a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,this.K,0);a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,this.Ub);a.bindFramebuffer(a.FRAMEBUFFER,null)}})(EGG);
(function(b){b.Ah=1;b.zh=2;b.Bh=3;b.C=function(a){b.s.Y(this,a);this.w=[];this.h=new b.T;this.backgroundColor={r:1,o:1,m:1,bc:1};this.Hb={r:0,o:0,m:0};this.Cd={r:.5,o:.5,m:.5};this.I=[]};b.l(b.ba,b.C);b.l(b.Z,b.C);b.l(b.da,b.C);b.C.prototype.h=null;b.C.prototype.J="es5";b.C.prototype.R=null;b.C.prototype.backgroundColor=null;b.C.prototype.filter=null;b.C.prototype.Cd=null;b.C.prototype.Hb=null;b.C.prototype.Jc=10;b.C.prototype.Ic=80;b.C.prototype.dc=b.Ah;b.C.prototype.I=null;b.C.prototype.Ii=!0;b.C.prototype.dk=
function(a){a=b.lb(a);this.backgroundColor={r:a.r,o:a.o,m:a.m,bc:a.bc}};b.C.prototype.cg=function(){return this.Hb};b.C.prototype.Td=function(a){a=b.lb(a);this.Hb={r:a.r,o:a.o,m:a.m};this.R&&this.R.c.clearColor(this.backgroundColor.r,this.backgroundColor.o,this.backgroundColor.m,1);return this};b.C.prototype.qh=function(a){"string"==typeof a&&(a=b.s.get(a));this.h=a;return this};b.C.prototype.Aa=function(a){this.c=a;a.S=this.gc();this.h.eh(this.R.canvas.width/this.R.canvas.height);this.R.c.clearColor(this.backgroundColor.r,
this.backgroundColor.o,this.backgroundColor.m,1);for(var b=0;b<this.w;b++)this.w[b].Aa&&children[b].Aa(a)};b.C.xb=function(a,b){return a.th-b.th};b.C.prototype.Xk=function(a,h){for(var c=a.D.h.fc(),e=0;e<h.length;e++){if(h[e].object.ua)var g=h[e].object.ua().yb;else g=h[e].object.ga(),g=[g[3],g[7],g[11]];h[e].th=g[0]*c[8]+g[1]*c[9]+g[2]*c[10]+c[11]}h.sort(b.C.xb);return h};b.C.prototype.Be=function(a){return this.filter?this.filter.Be(a):null};b.C.prototype.sj=function(a,h){for(var c,e=[],g=b.xi(h),
k=0;k<a.length;k++)if(c=a[k],c.ua&&c.Gi){var f=c.ua(),l=f.yb;b.Lk([l[0],l[1],l[2],f.Zg],g)&&b.Jj(f.Ij,g)&&e.push(c)}else e.push(c);return e};b.C.prototype.Pk=function(a){for(var b=[],c=0;c<a.length;c++){var e=a[c];if(e.Yi)for(var g=e.N,k=0;k<g.length;k++){var f=g[k].zb();g[k].Na();f.Ld||(f.Ig=k);f.Ld||(f.Ld=k);b.push({object:e,ob:k})}else b.push({object:e,ob:0})}return b};b.C.prototype.Mk=function(a,b){if(!a.object.j)return 1;if(!b.object.j)return-1;var c=a.object.j.Xg,e=b.object.j.Xg;if(c>e)return 1;
if(c<e||!a.object.N||!b.object.N)return-1;c=a.object.N[a.ob].zb().Ig;e=b.object.N[b.ob].zb().Ig;if(c>e)return 1;if(c<e)return-1;c=a.object.N[a.ob].Na();e=a.object.N[a.ob].Na();if(!c)return-1;if(!e)return 1;c=c.Ld;e=e.Ld;return c>e?1:c<e?-1:0};b.C.prototype.Rc=function(a){this.h.nb&&this.h.gd(this.h.nb);a.S=this.gc();var h=a.S;a.D=this;this.Ne=null;a.disable(a.BLEND);this.Ri=this.Be(a);var c=this.Lc(),e=this.h.tg();this.Ii&&(e=this.h.tg(),c=this.sj(c,e));for(var c=this.Pk(c),c=c.sort(this.Mk),g=0;g<
h.length;g++)if(h[g].Bc){h[g].c||h[g].Aa(a);var e=this.h.O,k=this.h.Ma();h[g].Fa||(h[g].Fa={});if(h[g].Fa.Vg!=h[g].De()||h[g].Fa.nj!=h[g].ga())h[g].Fa.Vg=h[g].De(),h[g].Fa.nj=h[g].ga(),h[g].Fa.zg=b.va(h[g].ga()),h[g].Fa.Kk=b.v(h[g].De(),h[g].Fa.zg),h[g].Gn=!1;a.bindFramebuffer(a.FRAMEBUFFER,h[g].ab);a.viewport(0,0,parseFloat(h[g].Za),parseFloat(h[g].Ya));a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT);this.h.Wd(h[g].Fa.Vg);this.h.O=h[g].Fa.zg;for(var f=0;f<c.length;f++)c[f].object.vb(a,b.zc,f,c[f].ob,
h[g].Hc);a.flush();this.h.O=e;this.h.Wd(k);h[g].K&&(a.bindTexture(a.TEXTURE_2D,h[g].K),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.generateMipmap(a.TEXTURE_2D));a.bindFramebuffer(a.FRAMEBUFFER,null)}this.h.Ib&&this.h.rd();this.$i(a,c);e=this.h.O;k=this.h.Ma();for(this.Mf=!1;0<this.I.length;)h=this.I.pop(),a.bindFramebuffer(a.FRAMEBUFFER,h.ab),this.h.O=h.Mb,this.h.Wd(h.Nj),this.Rd(a,c,0,0,h.width,h.height,b.kb,h.self);this.h.O=
e;this.h.Wd(k);a.bindFramebuffer(a.FRAMEBUFFER,this.Ri);this.Rd(a,c,this.R.ug(),this.R.vg(),this.R.wg(),this.R.Je());this.ti(a,c);this.Mf=!0};b.C.prototype.$i=function(a,h){for(var c=0;c<h.length;c++)h[c].object.vb(a,b.Df,0,h[c].ob)};b.C.prototype.Rd=function(a,h,c,e,g,k,f,l){a.clearDepth(1);a.depthFunc(a.LEQUAL);a.viewport(c,e,g,k);a.clearColor(this.backgroundColor.r,this.backgroundColor.o,this.backgroundColor.m,this.backgroundColor.bc);f?a.clear(a.DEPTH_BUFFER_BIT|a.COLOR_BUFFER_BIT|a.STENCIL_BUFFER_BIT):
(a.scissor(c,e,g,k),a.enable(a.SCISSOR_TEST),this.R.Ch(),a.disable(a.SCISSOR_TEST));f||(f=b.kb);c=[];a.disable(a.BLEND);for(e=0;e<h.length;e++)h[e].object.fe||h[e]==l?h[e]!=l&&c.push(h[e]):h[e].object.vb(a,f,0,h[e].ob);a.enable(a.BLEND);c=this.Xk(a,c);for(e=0;e<c.length;e++)h[e]!=l&&c[e].object.vb(a,f,0,c[e].ob)};b.C.prototype.ti=function(a,h){this.filter&&this.filter.$g&&(a.clearDepth(1),a.depthFunc(a.LEQUAL),a.bindFramebuffer(a.FRAMEBUFFER,this.filter.Si(a)),this.Rd(a,h,0,0,this.filter.Ui(),this.filter.Ti(),
b.zc));this.filter&&this.filter.ah&&(a.clearDepth(1),a.depthFunc(a.LEQUAL),a.bindFramebuffer(a.FRAMEBUFFER,this.filter.Zi(a)),this.Rd(a,h,0,0,this.filter.og(),this.filter.ng(),b.pe));this.filter&&this.filter.vb(a,null)};b.C.prototype.Kf=function(a,b,c,e,g,k){this.Mf&&this.I.push({ab:a,Mb:b,Nj:c,height:g,width:e,self:k})};b.C.prototype.Tj=function(a,h){var c=this.R.c,e=this.h.O,g=this.h.aa;this.h.O=b.va(b.md([h[2],h[1],h[0],a[0],h[0],h[2],h[1],a[1],h[1],h[0],h[2],a[2],0,0,0,1]));this.Ug||(this.Ug=
b.Gg(-1E-4,1E-4,-1E-4,1E-4,0,this.h.Ca));this.h.aa=this.Ug;c.viewport(0,0,8,1);c.clear(c.DEPTH_BUFFER_BIT);c.disable(c.BLEND);c.D=this;for(var k=this.Lc(),f=0;f<k.length;f++)k[f].We&&k[f].vb(c,b.yc,f+1);c.flush();f=new Uint8Array(32);c.readPixels(0,0,8,1,c.RGBA,c.UNSIGNED_BYTE,f);var l=[f[4]/255,f[5]/255,f[6]/255],n=.5*Math.sqrt(l[0]*l[0]+l[1]*l[1]+l[2]*l[2]),l=[l[0]/n-1,l[1]/n-1,l[2]/n-1],k=k[f[0]+256*f[1]+65536*f[2]-1],n=(f[10]/255+.00390625*f[9]/255+1.52587890625E-5*f[8]/255)*this.h.Ca,m=[];m[0]=
f[14]/255+.00390625*f[13]/255+1.52587890625E-5*f[12]/255;m[1]=f[18]/255+.00390625*f[17]/255+1.52587890625E-5*f[16]/255;c.bindFramebuffer(c.FRAMEBUFFER,null);c.viewport(0,0,this.R.canvas.width,this.R.canvas.height);this.h.O=e;this.h.aa=g;return k?{object:k,Hc:n,vd:[a[0]-h[0]*n,a[1]-h[1]*n,a[2]-h[2]*n],tn:l,K:m}:null};b.C.prototype.Dj=function(a,b){var c=this.mj(a,b);return c?this.Tj(c.origin,c.vd):null};b.C.prototype.mj=function(a,h){if(this.h){if(this.h.O&&this.h.aa){var c=2*((a-this.R.ug())/this.R.wg()-
.5),e=2*-((h+(this.R.Je()-this.R.canvas.height+this.R.vg()))/this.R.Je()-.5),g=b.v(b.va(this.h.O),b.va(this.h.aa)),k=b.qa(g,[c,e,-1,1]),k=[k[0]/k[3],k[1]/k[3],k[2]/k[3]],c=b.qa(g,[c,e,1,1]),c=[-(c[0]/c[3]-k[0]),-(c[1]/c[3]-k[1]),-(c[2]/c[3]-k[2])],c=b.la(c);return{origin:k,vd:c}}return null}b.error("No camera set for picking");return null}})(EGG);window.EGG||(window.EGG={});
(function(b){b.P=function(){};b.P.prototype.$g=!0;b.P.prototype.ah=!0;b.P.prototype.I=null;b.P.prototype.na=null;b.P.prototype.Zc=null;b.P.prototype.G=null;b.P.prototype.ze=null;b.P.prototype.ye=null;b.P.prototype.Qg=null;b.P.prototype.Pg=null;b.P.prototype.pd=function(a){this.na||(this.na=[]);this.na.push(a)};b.P.prototype.createBuffer=function(a,b,c){b||(b=a.canvas.width);c||(c=a.canvas.height);var e=a.createFramebuffer(),g=a.createRenderbuffer(),k=a.createTexture();a.bindTexture(a.TEXTURE_2D,k);
var f=new Uint8Array(b*c*4);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,b,c,0,a.RGBA,a.UNSIGNED_BYTE,f);a.bindFramebuffer(a.FRAMEBUFFER,e);a.bindRenderbuffer(a.RENDERBUFFER,g);a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_COMPONENT16,b,c);a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,g);a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,k,0);a.bindRenderbuffer(a.RENDERBUFFER,null);a.bindFramebuffer(a.FRAMEBUFFER,null);a.bindTexture(a.TEXTURE_2D,null);return[e,
g,k]};b.P.prototype.Be=function(a){if(!this.I)return null;this.c||(this.c=a);this.G||(this.G=this.createBuffer(a));return this.G[0]};b.P.prototype.Si=function(a){if(!this.I)return null;this.c||(this.c=a);this.Gc||(this.Gc=this.createBuffer(a,this.hk(),this.gk()));return this.Gc[0]};b.P.prototype.hk=function(){this.ze=void 0;this.Gc=null};b.P.prototype.Ui=function(){return this.ze?this.ze:this.c.canvas.width};b.P.prototype.gk=function(){this.ye=void 0;this.Gc=null};b.P.prototype.Ti=function(){return this.ye?
this.ye:this.c.canvas.height};b.P.prototype.og=function(){return this.Qg?this.Qg:this.c.canvas.width};b.P.prototype.ng=function(){return this.Pg?this.Pg:this.c.canvas.height};b.P.prototype.Zi=function(a){if(!this.I)return null;this.c||(this.c=a);this.Ve||(this.Ve=this.createBuffer(a,this.og(),this.ng()));return this.Ve[0]};b.P.prototype.M=function(a,b,c){this.Zc||(this.Zc={});this.Zc[b]={type:a,value:c}};b.P.prototype.vb=function(a,h){h||(h=null);if(this.I)for(var c=0;c<this.I.length;c++){this.I.length-
1==c?a.bindFramebuffer(a.FRAMEBUFFER,h):(this.I[c].buffer||(this.I[c].buffer=this.createBuffer(a,this.I[c].width,this.I[c].height)),a.bindFramebuffer(a.FRAMEBUFFER,this.I[c].buffer[0]));a.viewport(0,0,this.I[c].width?this.I[c].width:a.canvas.width,this.I[c].height?this.I[c].height:a.canvas.height);a.clearDepth(1);a.depthFunc(a.LEQUAL);a.clearColor(0,0,0,0);a.clear(a.DEPTH_BUFFER_BIT);this.I[c].U||(this.I[c].U=this.Dh(a,this.I[c].Zk));a.useProgram(this.I[c].U);for(var e=0;8>e;e++)a.disableVertexAttribArray(e);
attribslot=b.getAttribLocation(a,this.I[c].U,"position");this.xa||this.xe(a);a.bindBuffer(a.ARRAY_BUFFER,this.xa);a.enableVertexAttribArray(attribslot);a.vertexAttribPointer(attribslot,this.xa.Pa,a.FLOAT,!1,0,0);this.Jh(a,c);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.L);a.drawElements(a.TRIANGLES,this.L.Ea,a.UNSIGNED_SHORT,0)}};b.P.prototype.Jh=function(a,h){for(key in this.Zc){var c=this.Zc[key];"Matrix4fv"==c.type?b.hb(a,b.getUniformLocation(a,this.I[h].U,key),!1,c.value):b.M(a,c.type,b.getUniformLocation(a,
this.I[h].U,key),c.value)}c=1;a.activeTexture(a.TEXTURE0);a.bindTexture(a.TEXTURE_2D,this.G[2]);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);b.M(a,"1i",b.getUniformLocation(a,this.I[h].U,"EGG_RENDER"),0);this.$g&&(a.activeTexture(a["TEXTURE"+c]),a.bindTexture(a.TEXTURE_2D,this.Gc[2]),a.texParameteri(a.TEXTURE_2D,
a.TEXTURE_MAG_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),b.M(a,"1i",b.getUniformLocation(a,this.I[h].U,"EGG_DEPTH"),c),c++);this.ah&&(a.activeTexture(a["TEXTURE"+c]),a.bindTexture(a.TEXTURE_2D,this.Ve[2]),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,
a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),b.M(a,"1i",b.getUniformLocation(a,this.I[h].U,"EGG_NORMAL"),c),c++);for(var e=0;e<h;e++)a.activeTexture(a["TEXTURE"+c]),a.bindTexture(a.TEXTURE_2D,this.I[e].buffer[2]),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),
b.M(a,"1i",b.getUniformLocation(a,this.I[h].U,"EGG_PASS"+e),c),c++;this.na||(this.na=[]);for(e=0;e<this.na.length;e++)a.activeTexture(a["TEXTURE"+(e+c)]),this.na[e].Ob(a,null),b.M(a,"1i",b.getUniformLocation(a,this.I[h].U,"TEXTURE"+e),e+c)};b.P.prototype.xe=function(a){this.xa||(this.xa=a.createBuffer());a.bindBuffer(a.ARRAY_BUFFER,this.xa);a.bufferData(a.ARRAY_BUFFER,new Float32Array([1,1,.5,-1,1,.5,-1,-1,.5,1,-1,.5]),a.STATIC_DRAW);this.xa.Pa=3;this.xa.Ea=4;this.L||(this.L=a.createBuffer());a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,
this.L);a.bufferData(a.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,2,3,0]),a.STATIC_DRAW);this.L.Pa=1;this.L.Ea=6};b.P.prototype.Dh=function(a,h){var c=[];c.push("attribute vec3 position;\n");c.push("varying vec2 texCoord;\n");c.push("void main(void){\n");c.push("texCoord=(position.xy+vec2(1.0,1.0))/2.0;\n");c.push("gl_Position = vec4(position.xyz,1.0);\n");c.push("}\n");var c=b.Rb(a,a.VERTEX_SHADER,c.join("")),e=b.Rb(a,a.FRAGMENT_SHADER,h);return b.Kc(a,c,e)}})(EGG);
"undefined"==typeof EGG&&(EGG={});
(function(b){b.je=function(a,b,c){this.canvas=document.createElement("canvas");this.context=this.canvas.getContext("2d");this.canvas.width=b;this.canvas.height=c;b=new Image;b.Mc=this;b.onload=function(){this.Mc.context.drawImage(this,0,0);this.Mc.data=this.Mc.context.getImageData(0,0,this.Mc.canvas.width,this.Mc.canvas.height).data};b.src=a};b.je.prototype.canvas=null;b.je.prototype.context=null;b.je.prototype.data=null;b.ed=function(){document.xb||(document.xb=[]);document.addEventListener("keydown",
this.uj,!1);document.addEventListener("keyup",this.vj,!1)};b.ed.prototype.Ab=function(a){return document.xb[a]?!0:!1};b.ed.prototype.uj=function(a){document.xb[a.keyCode]=!0};b.ed.prototype.vj=function(a){document.xb[a.keyCode]=!1};b.Xa=function(a){this.element=a;this.element.ic=0;this.element.jc=0;this.element.mc=0;this.element.Kb||(this.element.Kb=[]);a.addEventListener("mousemove",this.xj,!1);a.addEventListener("mousedown",this.wj,!1);a.addEventListener("mouseup",this.yj,!1);a.addEventListener("touchstart",
this.Bj,!1);a.addEventListener("touchmove",this.Aj,!1);a.addEventListener("touchend",this.zj,!1)};b.Xa.prototype.element=null;b.Xa.prototype.xj=function(a){this.ic=a.clientX;this.jc=a.clientY;this.mc=0};b.Xa.prototype.wj=function(a){this.Kb[a.button]=!0};b.Xa.prototype.yj=function(a){this.Kb[a.button]=!1};b.Xa.prototype.Aj=function(a){if(1==a.touches.length)this.ic=a.touches[0].clientX,this.jc=a.touches[0].clientY,this.mc=0,a.un&&a.preventDefault();else if(2==a.touches.length){this.ic=.5*(a.touches[0].clientX+
a.touches[1].clientX);this.jc=.5*(a.touches[0].clientY+a.touches[1].clientY);var b=a.touches[0].clientX-a.touches[1].clientX;a=a.touches[0].clientY-a.touches[1].clientY;this.mc=Math.sqrt(b*b+a*a)}};b.Xa.prototype.Bj=function(a){if(1==a.touches.length)this.ic=a.touches[0].clientX,this.jc=a.touches[0].clientY,this.Kb[b.hd]=!0,this.mc=0;else if(2==a.touches.length){this.ic=.5*(a.touches[0].clientX+a.touches[1].clientX);this.jc=.5*(a.touches[0].clientY+a.touches[1].clientY);var h=a.touches[0].clientX-
a.touches[1].clientX;a=a.touches[0].clientY-a.touches[1].clientY;this.mc=Math.sqrt(h*h+a*a);this.Kb[b.hd]=!0}};b.Xa.prototype.zj=function(){this.Kb[b.hd]=!1};b.Xa.prototype.hj=function(a){return this.element.Kb[a]?!0:!1};b.Xa.prototype.Dd=function(){return{x:this.element.ic,y:this.element.jc,d:this.element.mc}};b.hd=0;b.Nm=1;b.Om=2;b.ol=8;b.Gm=9;b.Al=13;b.Sh=16;b.Oh=17;b.ml=18;b.tm=19;b.ql=20;b.Cl=27;b.sm=33;b.rm=34;b.zl=35;b.Ul=36;b.Qh=37;b.Th=38;b.Rh=39;b.Ph=40;b.Wl=45;b.wl=46;b.al=48;b.bl=49;b.cl=
50;b.dl=51;b.el=52;b.fl=53;b.gl=54;b.hl=55;b.il=56;b.jl=57;b.kl=65;b.nl=66;b.Nh=67;b.tl=68;b.yl=69;b.Dl=70;b.Rl=71;b.Tl=72;b.Vl=73;b.Xl=74;b.Yl=75;b.Zl=76;b.am=77;b.cm=78;b.om=79;b.qm=80;b.vm=81;b.wm=82;b.ym=83;b.Fm=84;b.Hm=85;b.Im=86;b.Jm=87;b.Uh=88;b.Km=89;b.Lm=90;b.$l=91;b.xm=92;b.Am=93;b.dm=96;b.em=97;b.fm=98;b.gm=99;b.hm=100;b.im=101;b.jm=102;b.km=103;b.lm=104;b.mm=105;b.bm=106;b.ll=107;b.Em=109;b.vl=110;b.xl=111;b.El=112;b.Il=113;b.Jl=114;b.Kl=115;b.Ll=116;b.Ml=117;b.Nl=118;b.Ol=119;b.Pl=120;
b.Fl=121;b.Gl=122;b.Hl=123;b.nm=144;b.zm=145;b.Bm=186;b.Bl=187;b.sl=188;b.ul=189;b.um=190;b.Ql=191;b.Sl=192;b.pm=219;b.pl=220;b.rl=221;b.Cm=222;b.Dm=32})(EGG);
(function(b){function a(a,c){if(0<c){var e=a/c*100;1<b.W.length&&(e*=(1+b.lc)/b.W.length);var g=(new Date).getTime();null!=b.Me&&50>g-b.Me||(b.Me=g,e=Math.round(e),CDSLonUpdateProgress&&"function"==typeof CDSLonUpdateProgress?CDSLonUpdateProgress(e):document.getElementById("loadingScrn").innerHTML="Loading "+e+"%")}}b.Ia=function(a){b.s.Y(this,a);this.N=[];this.Ue={};this.eb=[];this.Ye=[]};b.l(b.A,b.Ia);b.Ia.prototype.La=function(a,b){if("http://"==a.substr(0,7)||"file://"==a.substr(0,7)||"https://"==
a.substr(0,8))return a;b||(b=window.location.href);b=this.La(b,null);for(var e=b.split("/"),g=e[2],k=e[0],f=[],l=3;l<e.length-1;l++)f.push(e[l]);"/"==a.substr(0,1)&&(f=[]);e=a.split("/");for(l=0;l<e.length;l++)".."==e[l]?f.pop():""!=e[l]&&f.push(e[l]);return k+"//"+g+"/"+f.join("/")};b.Ia.prototype.Se=function(a){this.Re?this.Ye.push(a):this.Cg(a,null,function(a,b){"string"!=typeof b&&(b=String.fromCharCode.apply(null,new Uint8Array(b)));this.Cj(b.split("\n"));if(0<this.Ye.length){var h=this.Ye.pop();
this.Se(h)}else this.Tg()})};b.xg=!1;b.Ia.prototype.Cj=function(a){for(var c=null,e=!1,g=0;g<=a.length;g++){if(n&&(g==a.length||"newmtl"==a[g].substr(0,6))){if(b.xg){var k=n.cg(),f=n.color,l=((k.r+k.o+k.m)/3+(f.r+f.o+f.m)/3)/1.2;1<l&&(k.r/=l,k.o/=l,k.m/=l,f.r/=l,f.o/=l,f.m/=l,n.Vc(f),n.Td(k))}!e&&c&&(k=new b.g,k.Yb(b.jd),k.Ud(b.Gb),k.Xd(c),k.gh(b.tc),n.qd(k))}if(g==a.length)break;if("newmtl"==a[g].substr(0,6)){f=a[g].split(/[\s\r]+/);0<f.length&&0==f[0].length&&f.shift();0<f.length&&0==f[f.length-
1].length&&f.pop();var n=new b.H,c=null,e=!1;this.Ue[f[1]]=n;g++}f=a[g].split(/[\s\r]+/);0<f.length&&0==f[0].length&&f.shift();0<f.length&&0==f[f.length-1].length&&f.pop();if(1<f.length)switch(f[0]){case "Kd":n.Vc({r:parseFloat(f[1]),o:parseFloat(f[2]),m:parseFloat(f[3])});break;case "Ka":n.Td({r:parseFloat(f[1]),o:parseFloat(f[2]),m:parseFloat(f[3])});break;case "Ks":n.wk({r:parseFloat(f[1]),o:parseFloat(f[2]),m:parseFloat(f[3])});break;case "Ns":n.vk(parseFloat(f[1])/.3);break;case "d":case "Tr":this.ph(!0);
n.dh(parseFloat(f[1]));break;case "map_d":k=new b.g;k.Yb(b.le);k.Ud(b.Gb);for(var l=new b.Ka,m=1;"-"==f[m][0];)m+=2;l.Db(this.La(f[m],this.Qc));n.pd(l);k.Xd(l);n.qd(k);this.yk();break;case "map_Kd":case "map_Ks":case "map_spec":case "map_Ka":k=new b.g;"map_Kd"==f[0]&&k.Yb(b.kd);"map_Ks"==f[0]&&k.Yb(b.ne);"map_spec"==f[0]&&k.Yb(b.oe);"map_Ka"==f[0]&&k.Yb(b.jd);k.Ud(b.Gb);l=new b.Ka;for(m=1;"-"==f[m][0];)m+=2;l.Db(this.La(f[m],this.Qc));n.pd(l);k.Xd(l);k.gh(b.tc);n.qd(k);"map_Kd"==f[0]&&(c=l);"map_Ka"==
f[0]&&(e=!0);break;case "bump":case "map_bump":k=new b.g;k.Yb(b.me);k.Ud(b.Gb);l=new b.Ka;for(m=1;"-"==f[m][0];)m+=2;l.Db(this.La(f[m],this.Qc));n.pd(l);k.Xd(l);n.qd(k)}}};b.Ia.prototype.Cg=function(h,c,e){this.Qc&&!c?c=this.Qc:this.Qc=h;this.Re=!0;e||(e=this.loaded);h=this.La(h,c);var g=new XMLHttpRequest,k=this;g&&(c=g.responseType&&"string"===typeof g.responseType,g.open("GET",h,!0),c?(g.responseType="arraybuffer",g.onprogress=function(b){b.lengthComputable?a(b.loaded,b.total):a(100*(1-Math.exp(-.3*
b.loaded/5E5)),100)},g.onreadystatechange=function(){4==this.readyState&&(200==this.status||0==this.status?(k.Re=!1,e.call(k,h,this.response)):b.error("Error loading Document: "+h+" status "+this.status))}):(g.overrideMimeType("text/plain; charset=x-user-defined"),g.onreadystatechange=function(){4==this.readyState&&(200==this.status||0==this.status?(k.Re=!1,e.call(k,h,this.responseText)):b.error("Error loading Document: "+h+" status "+this.status));3==this.readyState&&a(g.responseText.length,g.getResponseHeader("Content-Length"))}),
g.send(""))};b.Me=null;b.Ia.prototype.Db=function(a,b){this.Cg(a,b)};b.Ia.prototype.loaded=function(a,c){this.file=c;var e=!1,g=null,k=null,f=0;"string"!=typeof c?(g=new Uint8Array(c),1!=g[0]?this.file=c=String.fromCharCode.apply(null,g):k=c.byteLength-1):1==c.charCodeAt(0)&&(k=c.length-1);if(null!=k)for(var l=1;l<k;){var n,m;null!=g?(n=256*g[l]+g[l+1],l+=2,m=String.fromCharCode.apply(null,new Uint8Array(c,l,n))):(n=256*c.charCodeAt(l)+c.charCodeAt(l+1),l+=2,m=c.substr(l,n));l+=n;"#"!=m.charCodeAt(0)&&
(n=m.split(" "),"vtn_binary"==n[0]?l+=16*n[1]:"Ff_Binary"==n[0]?l+=6*n[1]:"mtllib"==n[0]?(e=!0,this.Se(n[1])):"usemtl"==n[0]?f++:"o"==n[0]&&f++)}else for(g=c.split("\n"),k=0;k<g.length;k++)n=g[k].split(" "),1<n.length&&("mtllib"==n[0]?(e=!0,this.Se(n[1])):"usemtl"==n[0]?f++:"o"==n[0]&&f++);0<f?b.$b+=f:b.$b++;b.lc++;e||this.Tg()};b.Ia.prototype.lf=function(){var a=0,c=0;if(!(b.lc<b.W.length)){for(var e in b.Cb)b.Cb.hasOwnProperty(e)&&(a+=b.Cb[e]);0<b.W.length&&(c=Math.round(a/b.W.length),1<b.$b&&(c=
Math.round(c/b.$b),c=Math.round(.95*c),c+=Math.round(5*b.ud/b.$b)),b.lc<b.W.length&&(c=Math.round(c*b.lc/b.W.length)),!isNaN(c)&&CDSLonUpdateProgressInit&&"function"==typeof CDSLonUpdateProgressInit?CDSLonUpdateProgressInit(c):document.getElementById("loadingScrn").innerHTML="decompressing "+c+"%")}};b.Ia.prototype.$a=function(a,c,e,g,k,f,l,n,m){if(!m){m={cb:[],pb:[],ee:[],Oa:0};for(var r=0;b.Cb[this.uid+"-"+r];)r++;m.id=this.uid;m.gf=m.id+"-"+r;m.size=a.length+c.length+e.length}var r=m.Oa,p=new Date,
q=p.getTime();if(0==n){n=1/65535*(l[0]-f[0]);var u=1/65535*(l[1]-f[1]),v=1/65535*(l[2]-f[2]),t=parseFloat(f[0]),w=parseFloat(f[1]),A=parseFloat(f[2]);do if(m.cb.push(t+n*a[r++]),m.cb.push(w+u*a[r++]),m.cb.push(A+v*a[r++]),0==r%2E3&&200<p.getTime()-q)break;while(r<a.length);m.Oa=r;b.Cb[m.gf]=Math.round(r/m.size*100);this.lf();m.Oa<a.length?setTimeout(function(){b.W[m.id].$a(a,c,e,g,k,f,l,0,m)},5):(m.Oa=0,this.$a(a,c,e,g,k,f,l,1,m))}else if(1==n){p=1/65535*(l[3]-f[3]);q=1/65535*(l[4]-f[4]);n=parseFloat(f[3]);
u=parseFloat(f[4]);do m.ee.push(n+p*e[r++]),m.ee.push(u+q*e[r++]);while(0!=r%1E4&&r<e.length);m.Oa=r;totalComplete=0;b.Cb[m.gf]=Math.round((m.Oa+a.length)/m.size*100);this.lf();m.Oa<e.length?setTimeout(function(){b.W[m.id].$a(a,c,e,g,k,f,l,1,m)},5):(m.Oa=0,this.$a(a,c,e,g,k,f,l,2,m))}else if(2==n){n=1/65535*(l[5]-f[5]);u=1/65535*(l[6]-f[6]);v=1/65535*(l[7]-f[7]);t=parseFloat(f[5]);w=parseFloat(f[6]);A=parseFloat(f[7]);do m.pb.push(t+n*c[r++]),m.pb.push(w+u*c[r++]),m.pb.push(A+v*c[r++]);while(0!=r%
1E4&&r<c.length);m.Oa=r;totalComplete=0;percentComplete=Math.round((m.Oa+a.length+e.length)/m.size*100);b.Cb[m.gf]=percentComplete;this.lf();m.Oa<c.length?setTimeout(function(){b.W[m.id].$a(a,c,e,g,k,f,l,2,m)},5):this.$a(a,c,e,g,k,f,l,3,m)}else 3==n&&(r=new b.Ba,p=new b.u,p.lh(m.cb),0<m.ee.length&&p.oh(m.ee),0<m.pb.length&&p.Ze(m.pb),p.ih(g),r.Wc(p),r.Xc(k),this.si(r),b.ud++,b.ud==b.$b&&b.lc==b.W.length&&(b.Le=!0))};b.Ia.prototype.Tg=function(){var a=this.file,c=[],e=[],g=[],k=[],f=[],l=!0,n=[],m=
[],r=new b.H,p=0,q,u=null,v=null;"string"!=typeof a?(u=new Uint8Array(a),v=a.byteLength-1):1==a.charCodeAt(0)&&(v=a.length-1);if(null!=v)for(p=1;p<v;){var t;null!=u?(q=256*u[p]+u[p+1],p+=2,t=String.fromCharCode.apply(null,new Uint8Array(a,p,q))):(q=256*a.charCodeAt(p)+a.charCodeAt(p+1),p+=2,t=a.substr(p,q));p+=q;if("#"!=t.charCodeAt(0))if(t=t.split(" "),"vtnf_min"==t[0])for(q=0;8>q;q++)n.push(t[q+1]);else if("vtnf_max"==t[0])for(q=0;8>q;q++)m.push(t[q+1]);else if("vtn_binary"==t[0])if(null!=u){f=
new Uint8Array(a,p,16*t[1]);for(q=0;q<16*t[1];q+=16)e.push(256*f[q+0]+f[q+1]),e.push(256*f[q+2]+f[q+3]),e.push(256*f[q+4]+f[q+5]),c.push(256*f[q+6]+f[q+7]),c.push(256*f[q+8]+f[q+9]),g.push(256*f[q+10]+f[q+11]),g.push(256*f[q+12]+f[q+13]),g.push(256*f[q+14]+f[q+15]);p+=16*t[1]}else for(q=0;q<t[1];q++)e.push(256*(a.charCodeAt(p)&255)+(a.charCodeAt(p+1)&255)),e.push(256*(a.charCodeAt(p+2)&255)+(a.charCodeAt(p+3)&255)),e.push(256*(a.charCodeAt(p+4)&255)+(a.charCodeAt(p+5)&255)),c.push(256*(a.charCodeAt(p+
6)&255)+(a.charCodeAt(p+7)&255)),c.push(256*(a.charCodeAt(p+8)&255)+(a.charCodeAt(p+9)&255)),g.push(256*(a.charCodeAt(p+10)&255)+(a.charCodeAt(p+11)&255)),g.push(256*(a.charCodeAt(p+12)&255)+(a.charCodeAt(p+13)&255)),g.push(256*(a.charCodeAt(p+14)&255)+(a.charCodeAt(p+15)&255)),p+=16;else if("usemtl"==t[0])0<k.length&&(this.$a(e,g,c,k,r,n,m,0),k=[]),(r=this.Ue[t[1]])||logging.error("test");else if("Ff_Binary"==t[0])if(null!=u){f=new Uint8Array(a,p,6*t[1]);for(q=0;q<6*t[1];q+=6)k.push(256*f[q+0]+f[q+
1]),k.push(256*f[q+2]+f[q+3]),k.push(256*f[q+4]+f[q+5]);p+=6*t[1]}else for(q=0;q<t[1];q++)k.push(256*(a.charCodeAt(p)&255)+(a.charCodeAt(p+1)&255)),k.push(256*(a.charCodeAt(p+2)&255)+(a.charCodeAt(p+3)&255)),k.push(256*(a.charCodeAt(p+4)&255)+(a.charCodeAt(p+5)&255)),p+=6}else for(a=a.split("\n"),q=0;q<a.length;q++)if("#"!=a[q][0]&&(t=a[q].split(/[\s\r]+/),0<t.length&&0==t[0].length&&t.shift(),0<t.length&&0==t[t.length-1].length&&t.pop(),0<t.length))switch(t[0]){case "s":l="1"==t[1]?!0:!1;case "o":0<
k.length&&(this.$a(e,g,c,k,r,n,m,0),k=[],r=new b.H);break;case "usemtl":0<k.length&&(this.$a(e,g,c,k,r,n,m,0),k=[]);(r=this.Ue[t[1]])||logging.error("test");break;case "v":e.push(t);break;case "vt":c.push(t);break;case "vn":g.push(t);break;case "vtnf_min":for(p=1;p<t.length;p++)n.push(t[p]);break;case "vtnf_max":for(p=1;p<t.length;p++)m.push(t[p]);break;case "size_info":for(p=1;p<t.length;p++)info.push(t[p]);break;case "vtn":e.push(t[1]);e.push(t[2]);e.push(t[3]);c.push(t[4]);c.push(t[5]);g.push(t[6]);
g.push(t[7]);g.push(t[8]);break;case "Ff":k.push(t[1]);k.push(t[2]);k.push(t[3]);break;case "f":p=[];for(u=1;u<t.length;u++)v=f.indexOf(t[u]),-1!=v&&l||(f.push(t[u]),v=f.length-1),p.push(v);for(u=0;u<p.length-2;u++)k.push(p[0]-0),k.push(p[1+u]-0),k.push(p[2+u]-0)}this.$a(e,g,c,k,r,n,m,0)}})(EGG);"undefined"==typeof EGG&&(EGG={});
(function(b){function a(a){var b=unescape(a.substr(0,a.length-1)),c="";for(i=0;i<b.length;i++)c+=String.fromCharCode(b.charCodeAt(i)-a.substr(a.length-1,1));return unescape(c)}function h(a){return a&&a.checked}function c(a){var b;"string"===typeof a?"#"===a.charAt(0)&&(b=a):(a=Math.round(255*a).toString(16),b="#"+a+a+a);return b}var e=["#000000",.5,.5],g,k=!1;b.Lb=!1;b.Le=!1;b.W=[];b.ud=0;b.Cb={};b.Yc=!1;b.bd=!1;b.Bb=!1;b.Od=!0;b.$b=0;b.lc=0;b.$c=1;var f=new b.ba,l=0;b.Xj=function(){e=["#000000",
.5,.5];k=!1;b.Le=!1;b.W=[];b.ud=0;b.Cb=[];b.Kg=0;f=new b.ba;b.Bb=!0};window.restart=b.Xj;var n=0,m=0;b.cc=function(){f.rc(0,0,0);var a=f.ua(),c=g.Ee(),c=b.Lf(b.Xb(b.ac(c[0],c[1],c[2]),-n),b.Xb(b.ac(c[4],c[5],c[6]),m));f.rc(-a.yb[0]-c[0],-a.yb[1]-c[1],-a.yb[2]-c[2])};window.centreObject=b.cc;b.zoom=function(a){var c;b.Bb=!0;b.Lb=!0;a?(c=Math.sqrt(g.Ra*g.Ra+g.Qa*g.Qa+g.Sa*g.Sa),a=Math.min(20,Math.max(1,c-c*a/20)),a/=c,g.rc(g.Qa*a,g.Ra*a,g.Sa*a)):g.rc(0,1.9,0)};window.zoom=b.zoom;b.Pf=function(){var a=
document.getElementById("3dsomTextOver");if(a){var c=document.getElementById("3dsomTextUnder");if(c){var f=b.Kg*b.$c,e="mm";h(document.getElementById("measureMM"))?1E4<f?(f/=1E3,e="m"):1E3<f&&(f/=10,e="cm"):h(document.getElementById("measureIN"))?(f/=25.4,e="in"):h(document.getElementById("measureCM"))?(f/=10,e="cm"):h(document.getElementById("measureM"))&&(f/=1E3,e="m");f=parseInt((100*f).toString())/100;a.childNodes[0].nodeValue=f.toString()+" "+e;a=a.getBBox();c.setAttributeNS(null,"width",a.width+
8);c.setAttributeNS(null,"height",a.height+8)}}};window.changeUnits=b.Pf;b.Ak=function(a,c){if(!c||"mm"==c)b.$c=a;else if("m"==c)b.$c=1E3*a;else if("cm"==c)b.$c=10*model_Scale;else if("in"==c||"inches"==c){b.$c=25.4*a;var f=document.getElementById("measureIN");f&&(f.checked=!0)}};window.setUnits=b.Ak;b.reset=function(){document.getElementById("resetThis").checked=!0;f.af(Math.PI/2,Math.PI,0);n=m=0;b.cc();b.zoom();k=hasDragged=!1;b.Lb=!0};window.reset=b.reset;b.ek=function(a){a?"string"!==typeof a?
console.log("Please define the background as a hexidecimal string.",a):e[0]=a:console.log("The background Color was not set",a)};window.setBackgroundColour=b.ek;b.qk=function(a){l=Math.sin(a*Math.PI/180)};window.setMinTiltAngle=b.qk;b.ak=function(a){a||0===a?"string"!==typeof a&&1<a?(console.log("Please define the ambience as a Hexadecimal string or a number between 0 and 1.",a),e[1]=null):e[1]=c(a):console.log("The ambience value was not set",a)};window.setAmbience=b.ak;b.ik=function(a){a||0===a?
"string"!==typeof a&&5<a?(console.log("Please define the diffusion as a Hexadecimal string or a number between 0 and 1.",a),e[2]=null):e[2]=c(a):console.log("The Difuse value was not set",a)};window.setDiffuse=b.ik;b.Jf=function(a){a?e.push(a):console.error("No .rio file name was given",a)};window.addObject=b.Jf;b.Gk=function(){b.Yc=!0;b.bd=!0;b.Bb=!0;for(var a=0;a<b.W.length;a++)b.W[a].bf(!0)};window.setWireframeMode=b.Gk;b.tk=function(){b.Yc=!0;b.bd=!1;b.Bb=!0;for(var a=0;a<b.W.length;a++)b.W[a].bf(!1)};
window.setShadedMode=b.tk;b.xk=function(){b.Yc=!1;b.bd=!1;b.Bb=!0;for(var a=0;a<b.W.length;a++)b.W[a].bf(!1)};window.setTexturedMode=b.xk;b.Bk=function(){function c(){var a=f.ua(),a=1/Math.max(a.a[1]-a.a[0],a.a[3]-a.a[2],a.a[5]-a.a[4]);f.sk(a,a,a);b.cc();f.Vd(!0);CDSLonShow3D&&typeof CDSLonShow3D==typeof Function?CDSLonShow3D():(document.getElementById("loadingScrn").innerHTML=document.getElementById("loadingImg").innerHTML=null,document.getElementById("loadingScrn").style.display="none",document.getElementById("controls").style.visibility=
"visible")}function p(){h(document.getElementById("pan"))?T=!0:h(document.getElementById("zoom"))?U=!0:h(document.getElementById("measure"))?(V=!0,N=null):h(document.getElementById("rotate"))&&(R=!0)}function q(a){var c=0;a||(a=window.event);a.wheelDelta?(c=a.wheelDelta/120,window.opera&&(c=-c)):a.detail&&(c=-a.detail/3);c&&b.zoom(c);a.preventDefault&&a.preventDefault();a.returnValue=!1}function u(a,c){var f=.005*Math.sqrt(g.Qa*g.Qa+g.Ra*g.Ra+g.Sa*g.Sa);n+=a*f;m+=c*f;n=Math.max(-2,Math.min(2,n));
m=Math.max(-2,Math.min(2,m));b.cc()}function v(a,b){var c=new XMLHttpRequest;c.open("GET",b,!0);c.send(null);c.onreadystatechange=function(){4==this.readyState&&200==c.status&&(P[a].Nc.src=b)}}function t(){if(b.Le){var a=b.Bb;if(!W){W=!0;c();if(M[0])for(a=0;a<M.length;a++)v(a,M[a]);a=!0}h(document.getElementById("measure"))&&(y=z=0,k=!1,S=!0);H.hj(b.hd)||(R=T=U=!1);var e=T,m=U,n=R,p=V;S?R&&(D.Ab(b.Sh)?(e=!0,n=tmpMeasureDragging=!1):D.Ab(b.Oh)&&(m=!0,n=tmpMeasureDragging=!1)):(f.mh(f.Ed()+.02),b.cc(),
a=!0);p||(A.style.cursor="default");D.Ab(b.Nh)&&b.zoom(1);D.Ab(b.Uh)&&b.zoom(-1);D.Ab(b.Qh)&&u(-1,0);D.Ab(b.Rh)&&u(1,0);D.Ab(b.Th)&&u(0,-1);D.Ab(b.Ph)&&u(0,1);var q;k?(0<y?(y*=.9,.5>y&&(y=0)):0>y&&(y*=.9,-.5<y&&(y=0)),0<z?(z*=.9,.5>z&&(z=0)):0>z&&(z*=.9,-.5<z&&(z=0)),0==y&&0==z&&(E=k=!1)):(q=H.Dd(),y=q.x-C.x,z=q.y-C.y,0<q.d&&0<C.d?(n=p=!1,p=q.d-C.d,y*y+z*z<p*p?(y=0,z=-p,m=!0):e=!0):0<C.d&&(z=y=0),C=q);q=null;if(n||k){a=!0;q=f.Fe();var e=f.Ed(),m=f.Ge(),n=Math.cos(q),p=Math.sin(q),t=Math.cos(e),w=
Math.sin(e),x=Math.cos(m),B=Math.sin(m),n=b.ia([1,0,0,0,0,n,-p,0,0,p,n,0,0,0,0,1]);b.ia([t,0,w,0,0,1,0,0,-w,0,t,0,0,0,0,1]);b.ia([x,-B,0,0,B,x,0,0,0,0,1,0,0,0,0,1]);n=y/J*8;t=z/K*8;if(0==Math.sqrt(n*n+t*t))return;b.Lb=!0;e+=n;-.2>t&&(t=-.2);.2<t&&(t=.2);n=Math.cos(t);p=Math.sin(t);n=b.ia([1,0,0,0,0,n,-p,0,0,p,n,0,0,0,0,1]);p=b.ac(g.Qa,g.Ra,g.Sa);p=b.Nd(n,p);n=p[2]/Math.sqrt(p[0]*p[0]+p[1]*p[1]+p[2]*p[2]);.99>n&&n>l?(g.mk(p[0]),g.nk(p[1]),g.pk(p[2]),g.kh(),g.jh(),g.za()):e+=t;f.af(q,e,m);E=!0;b.cc()}else e?
(a=370/(J+K),u(y*a,z*a),E=!1,a=!0,b.Lb=!0):m?(y-z&&b.zoom(100*(y-z)/(J+K)),E=!1,a=!0):V&&(E=!1,a=!0,y=z=0,(q=F.Dj(C.x,C.y))?(A.style.cursor="none",e=document.getElementById("3dsomSVG"),e||(e=document.createElementNS("http://www.w3.org/2000/svg","svg"),e.style.position="absolute",e.style.width="100%",e.style.height="100%",e.style.left="0px",e.style.top="0px",e.style["pointer-events"]="none",e.id="3dsomSVG",A.parentNode.insertBefore(e,A.nextSibling)),null==N?N={Md:C,coords:q.vd}:(m=function(a,c,e){var f=
b.ac(e.x-c.x,e.y-c.y,0),f=b.Xb(b.la(f),8),g=b.Nd(b.Uc([0,0,.52]),f),h=b.Nd(b.Uc([0,0,-.52]),f),k="M "+e.x+" "+e.y+" L "+c.x+" "+c.y,k=k+(" M "+c.x+" "+c.y+" l "+g[0]+" "+g[1]),k=k+(" M "+c.x+" "+c.y+" l "+h[0]+" "+h[1]),g=b.Xb(g,-1),h=b.Xb(h,-1),k=k+(" M "+e.x+" "+e.y+" l "+g[0]+" "+g[1]),k=k+(" M "+e.x+" "+e.y+" l "+h[0]+" "+h[1]);a.setAttributeNS(null,"d",k);return b.Xb(f,.125)},n=document.getElementById("3dsomLine"),p=document.getElementById("3dsomLine2"),n||(n=document.createElementNS("http://www.w3.org/2000/svg",
"path"),n.id="3dsomLine",n.setAttributeNS(null,"stroke","white"),n.setAttributeNS(null,"stroke-width",3),n.setAttributeNS(null,"stroke-linecap","round"),p=document.createElementNS("http://www.w3.org/2000/svg","path"),p.id="3dsomLine2",p.setAttributeNS(null,"stroke","red"),p.setAttributeNS(null,"stroke-width",1),e.appendChild(n),e.appendChild(p)),m(n,N.Md,C),m=m(p,N.Md,C),p=b.Mi(N.coords,q.vd)/f.Ie(),(n=document.getElementById("3dsomTextOver"))?q=document.getElementById("3dsomTextUnder"):(q=document.createElementNS("http://www.w3.org/2000/svg",
"rect"),q.id="3dsomTextUnder",q.setAttributeNS(null,"fill","white"),q.setAttributeNS(null,"fill-opacity",.8),e.appendChild(q),n=document.createElementNS("http://www.w3.org/2000/svg","text"),n.id="3dsomTextOver",n.appendChild(document.createTextNode(" ")),e.appendChild(n)),b.Kg=p,b.Pf(),e=(N.Md.x+C.x)/2,p=(N.Md.y+C.y)/2,-.3>m[0]*m[1]?p+=20:Math.abs(m[1])>Math.abs(m[0])?e+=20:p-=20,n.setAttributeNS(null,"x",e),n.setAttributeNS(null,"y",p),e=n.getBBox(),q.setAttributeNS(null,"x",e.x-4),q.setAttributeNS(null,
"y",e.y-4),q.setAttributeNS(null,"width",e.width+8),q.setAttributeNS(null,"height",e.height+8))):A.style.cursor="default");q=A.clientWidth;e=A.clientHeight;if(q!=J||e!=K)A.width=q,A.height=e,L.Fk(q),L.Ek(e),J=q,K=e,g.eh(q/e),a=b.Lb=!0;b.Lb&&(q=document.getElementById("3dsomSVG"))&&q.parentNode.removeChild(q);q=I.length;0!=q&&30<=q&&(I.pop(),I.shift(),I=[]);I.push((new Date).getTime());q=b.ac(g.Qa,g.Ra,g.Sa);q=b.Nd(b.Uc([.2,.2,.2]),q);O.rc(q[0],q[1],q[2]);b.Bb=!1;a&&L.Rc();b.Lb=!1}}function w(){setTimeout(function(){requestAnimationFrame(w);
t()},1E3/30)}var A=document.getElementById(a("GHWPZmi%7Biv4"));A||(A=document.getElementById(a("qshipzmi%7Biv4")));var B=document.getElementById("instructions"),x=document.getElementById(a("wsqcgst%7Dvmklx4")),L=new b.ra(A),H=new b.Xa(A),D=new b.ed,I=[],J=1,K=1,y=0,z=0,P=[],M=[],E=!1,Q=e[0],F=new b.C,G=document[a("hsqemr4")]?document[a("hsqemr4")]:"null";if(G.indexOf(a("7hwsq2gsq4"))==G.length-9||G.indexOf(a("fmksfnigxfewi2gsq4"))==G.length-17||G.indexOf(a("m6s7h2gsq4"))==G.length-9)x&&(x.style.visibility=
a("lmhhir4"));else{if(!x||x.style.visibility==a("lmhhir4")||-1==x.innerHTML.indexOf(a("%297Ge%2964lvij%297H%2966lxxt%297E33%7B%7B%7B2m6s7h2gsq%2966%297I%7B%7B%7B2m6s7h2gsq%297G3e%297I4"),0)&&-1==x.innerHTML.indexOf(a("%297Ge%2964lvij%297H%2966lxxt%297E33%7B%7B%7B27hwsq2gsq%2966%297I%7B%7B%7B27hwsq2gsq%297G3e%297I4"),0))return;x.style.position="fixed";x.style.right="5px";x.style.bottom="5px";x.style.zIndex="999";x.style.display=a("fpsgo4");x.style.visibility=a("zmwmfpi4");x.style.fontSize=500<A.clientWidth?
"11px":"8px"}if(x=document.getElementById(a("GHWPIsphivJW4")))x.onselectstart=function(){return!1},x.onmousedown=function(){return!1};B&&(B.onselectstart=function(){return!1},B.onmousedown=function(){return!1});b.Cf=!0;B=b.lb(e[1]||"#fff");x=b.lb(e[2]||"#fff");5.4<=B.r+B.o+B.m+x.r+x.o+x.m&&(b.xg=!0);for(B=3;B<e.length;B++)b.W.push(new b.Ia(B-3)),b.W[B-3].Db(e[B]),f.nd(b.W[B-3]);F.dk(Q||"#222");F.Td(e[1]||"#fff");L.Hk(F);F.nd(f);f.af(Math.PI/2,Math.PI,0);g=new b.T;b.zoom();g.kh();g.jh();g.jk();g.za();
F.qh(g);var O=new b.F;O.rc(0,1,0);O.nh(b.fd);O.Vc(e[2]||"#fff");O.ck();O.uk();O.fk();F.nd(O);var W=!1,N=null,R=!1,T=!1,U=!1,S=!1,C=H.Dd(),V=!1;A.onmousedown=function(a){k=!1;0==a.button&&(S=!0,p(),C=H.Dd(),a.preventDefault())};A.ontouchstart=function(a){1<=a.touches.length&&(k=!1,S=!0,p(),C=H.Dd())};document.onmouseup=function(a){R=T=U=V=!1;E&&(k=!0);1==document.getElementById("resetThis").checked&&(S=!1);document.getElementById("resetThis").checked=!1;a.preventDefault()};document.ontouchend=function(){R=
T=U=V=!1;E&&(k=!0);1==document.getElementById("resetThis").checked&&(S=!1);document.getElementById("resetThis").checked=!1};A.ontouchmove=function(a){1<=a.touches.length&&a.preventDefault&&a.preventDefault()};window.addEventListener&&window.addEventListener("DOMMouseScroll",q,!1);window.onmousewheel=document.onmousewheel=q;(function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!requestAnimationFrame;++c)requestAnimationFrame=window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],
cancelAnimationFrame=window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];requestAnimationFrame||(requestAnimationFrame=window.requestAnimationFrame=function(b){var c=(new Date).getTime(),e=Math.max(0,16-(c-a)),f=window.setTimeout(function(){b(c+e)},e);a=c+e;return f});cancelAnimationFrame||(cancelAnimationFrame=window.cancelAnimationFrame=function(a){clearTimeout(a)})})();w()};window.setUp=b.Bk;b.Uj=function(){b.Bb=!0};window.refresh3D=b.Uj;
CDSLonShow3D=window.CDSLonShow3D;CDSLonUpdateProgress=window.CDSLonUpdateProgress;CDSLonUpdateProgressInit=window.CDSLonUpdateProgressInit;requestAnimationFrame=window.requestAnimationFrame})(EGG);})();
